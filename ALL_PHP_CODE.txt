================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\public\index.php
================================================================================
<?php

require_once __DIR__ . '/../autoload.php';
require_once __DIR__ . '/../config.php';

use App\Helpers\Auth;
use App\Controllers\AuthController;
use App\Controllers\UserController;
use App\Controllers\SubjectAreaController;
use App\Controllers\CourseController;
use App\Controllers\ModuleController;
use App\Controllers\EnquiryController;

Auth::startSession();

$request = isset($_GET['url']) ? $_GET['url'] : '';
$request = parse_url($request, PHP_URL_PATH);
$request = trim($request, '/');

if (empty($request)) {
    require __DIR__ . '/../src/Views/home.php';
} elseif ($request === 'login') {
    $controller = new AuthController();
    $controller->loginPage();
} elseif ($request === 'logout') {
    $controller = new AuthController();
    $controller->logout();
} elseif ($request === 'users') {
    $controller = new UserController();
    $controller->listUsers();
} elseif ($request === 'users/create') {
    $controller = new UserController();
    $controller->createUser();
} elseif (strpos($request, 'users/delete') === 0) {
    $controller = new UserController();
    $controller->deleteUser();
} elseif ($request === 'admin') {
    Auth::requireLogin();
    require __DIR__ . '/../src/Views/admin.php';
} elseif ($request === 'subject-areas') {
    $controller = new SubjectAreaController();
    $controller->listSubjectAreas();
} elseif (strpos($request, 'subject-areas/save') === 0) {
    $controller = new SubjectAreaController();
    $controller->saveSubjectArea();
} elseif (strpos($request, 'subject-areas/delete') === 0) {
    $parts = explode('/', $request);
    $id = isset($parts[2]) ? $parts[2] : null;
    $controller = new SubjectAreaController();
    $controller->deleteSubjectArea($id);
} elseif (strpos($request, 'subject-area/') === 0) {
    $parts = explode('/', $request);
    $id = isset($parts[1]) ? $parts[1] : null;
    $controller = new SubjectAreaController();
    $controller->showSubjectArea($id);
} elseif ($request === 'course-search') {
    $controller = new CourseController();
    $controller->showSearchPage();
} elseif ($request === 'courses') {
    $controller = new CourseController();
    $controller->listCourses();
} elseif (strpos($request, 'courses/save') === 0) {
    $controller = new CourseController();
    $controller->saveCourse();
} elseif (strpos($request, 'courses/delete') === 0) {
    $parts = explode('/', $request);
    $id = isset($parts[2]) ? $parts[2] : null;
    $controller = new CourseController();
    $controller->deleteCourse($id);
} elseif (strpos($request, 'course/') === 0) {
    $parts = explode('/', $request);
    $id = isset($parts[1]) ? $parts[1] : null;
    $controller = new CourseController();
    $controller->showCourse($id);
} elseif ($request === 'modules') {
    $controller = new ModuleController();
    $controller->listModules();
} elseif (strpos($request, 'modules/save') === 0) {
    $controller = new ModuleController();
    $controller->saveModule();
} elseif (strpos($request, 'modules/delete') === 0) {
    $parts = explode('/', $request);
    $id = isset($parts[2]) ? $parts[2] : null;
    $controller = new ModuleController();
    $controller->deleteModule($id);
} elseif ($request === 'enquiry') {
    $controller = new EnquiryController();
    $controller->showForm();
} elseif ($request === 'enquiry/save') {
    $controller = new EnquiryController();
    $controller->saveEnquiry();
} elseif ($request === 'enquiries') {
    header('Location: /admin/enquiries');
    exit;
} elseif ($request === 'admin/enquiries') {
    $controller = new EnquiryController();
    $controller->listEnquiries();
} elseif (strpos($request, 'admin/enquiries/') === 0) {
    $parts = explode('/', $request);
    $id = isset($parts[2]) ? $parts[2] : null;
    $controller = new EnquiryController();
    $controller->showEnquiry($id);
} elseif (strpos($request, 'enquiry/respond/') === 0) {
    $parts = explode('/', $request);
    $id = isset($parts[2]) ? $parts[2] : null;
    $controller = new EnquiryController();
    $controller->markResponded($id);
} elseif (strpos($request, 'enquiry/delete/') === 0) {
    $parts = explode('/', $request);
    $id = isset($parts[2]) ? $parts[2] : null;
    $controller = new EnquiryController();
    $controller->deleteEnquiry($id);
} elseif ($request === 'add-sample-courses') {
    try {
        $courses = [
            ['Computing', 'BSc Computer Science', 'BSc', 3, 'Learn the fundamentals of computer science including algorithms, data structures, and software engineering principles.', 1, 1],
            ['Computing', 'MSc Advanced Computing', 'MSc', 2, 'Advanced computing course covering machine learning, cloud computing, and distributed systems.', 1, 1],
            ['Computing', 'BSc Software Engineering', 'BSc', 3, 'Focus on software development methodologies, project management, and real-world application development.', 0, 1],
            ['Computing', 'MA Web Development', 'MA', 2, 'Master modern web technologies including React, Node.js, and full-stack development practices.', 1, 1],
            ['Computing', 'BSc Information Technology', 'BSc', 3, 'Comprehensive IT course covering networking, databases, security, and IT infrastructure.', 1, 1],
            ['Computing', 'MSc Data Science', 'MSc', 2, 'Deep dive into data science, machine learning, and big data analytics.', 0, 1],
            ['Computing', 'BSc Cybersecurity', 'BSc', 3, 'Learn cybersecurity principles, ethical hacking, and information security management.', 1, 1],
            ['Computing', 'Diploma IT Support', 'Diploma', 2, 'Practical IT support and helpdesk fundamentals for career starters.', 1, 1],
            ['Computing', 'BSc Game Development', 'BSc', 3, 'Create games using modern game engines and learn game design principles.', 0, 1],
            ['Computing', 'MSc AI Engineering', 'MSc', 2, 'Advanced artificial intelligence and machine learning engineering.', 1, 1],
            ['Computing', 'BSc Mobile App Development', 'BSc', 3, 'Develop mobile applications for iOS and Android platforms.', 1, 1],
            ['Computing', 'Certificate Cloud Computing', 'Certificate', 1, 'Introduction to AWS, Azure, and Google Cloud platforms.', 1, 1],
            ['Computing', 'BSc Networking', 'BSc', 3, 'Computer networks, routing, switching, and network administration.', 0, 1],
            ['Computing', 'MA IT Management', 'MA', 2, 'IT strategy, project management, and enterprise IT systems.', 1, 1],
            ['Computing', 'BSc Database Systems', 'BSc', 3, 'Database design, SQL, and advanced database management systems.', 1, 1],
        ];

        $inserted = 0;

        foreach ($courses as $course) {
            list($subjectName, $title, $type, $duration, $description, $partTime, $userId) = $course;
            $stmt = \App\Models\Database::query('SELECT id FROM subject_areas WHERE name = ?', [$subjectName]);
            $subject = $stmt->fetch(\PDO::FETCH_ASSOC);

            if ($subject) {
                $sql = 'INSERT INTO courses (title, subject_area_id, type, duration_years, description, part_time_available, created_by, created_at) 
                         VALUES (?, ?, ?, ?, ?, ?, ?, NOW())';
                \App\Models\Database::execute($sql, [
                    $title,
                    $subject['id'],
                    $type,
                    $duration,
                    $description,
                    $partTime,
                    $userId
                ]);
                $inserted++;
            }
        }

        echo "<h1>Sample Courses Added Successfully!</h1>";
        echo "<p>Inserted $inserted sample courses for pagination testing.</p>";
        echo "<p><a href='/subject-area/1'>View Computing Courses with Pagination â†’</a></p>";
    } catch (Exception $e) {
        http_response_code(500);
        echo "<h1>Error</h1>";
        echo "<p>" . htmlspecialchars($e->getMessage()) . "</p>";
    }
} elseif ($request === 'subject-area') {
    require __DIR__ . '/../src/Views/subject-area.php';
} else {
    http_response_code(404);
    require __DIR__ . '/../src/Views/404.php';
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Controllers\AuthController.php
================================================================================
<?php

namespace App\Controllers;

use App\Models\User;
use App\Helpers\Auth;

class AuthController
{
    public function loginPage()
    {
        if (Auth::isLoggedIn()) {
            Auth::redirect('/admin');
        }

        $error = null;

        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            $username = $_POST['username'] ?? '';
            $password = $_POST['password'] ?? '';

            if (empty($username) || empty($password)) {
                $error = 'Username and password are required';
            } else {
                $user = User::authenticateUser($username, $password);

                if ($user) {
                    Auth::login($user);
                    Auth::redirect('/admin');
                } else {
                    $error = 'Invalid username or password';
                }
            }
        }

        require __DIR__ . '/../Views/login.php';
    }

    public function logout()
    {
        Auth::logout();
        Auth::redirect('/login?message=logged_out');
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Controllers\CourseController.php
================================================================================
<?php

namespace App\Controllers;

use App\Models\Course;
use App\Models\SubjectArea;
use App\Models\Module;
use App\Models\Database;
use App\Helpers\Auth;

class CourseController
{
    private $error = '';
    private $success = '';

    public function listCourses()
    {
        Auth::requireLogin();

        $courses = Course::getAll();
        $subjectAreas = SubjectArea::getAll();
        $allModules = Module::getAll();
        $editCourse = null;
        $editModules = [];

        if (isset($_GET['edit'])) {
            $editId = (int) $_GET['edit'];
            $editCourse = Course::getById($editId);
            if ($editCourse) {
                $editModules = $this->getModulesForCourse($editId);
            }
        }

        include __DIR__ . '/../Views/courses.php';
    }

    public function showCourse($id)
    {
        try {
            $course = Course::getById($id);

            if (!$course) {
                include __DIR__ . '/../Views/404.php';
                return;
            }

            $subjectArea = SubjectArea::getById($course['subject_area_id']);

            $modules = $this->getModulesForCourse($id);

            include __DIR__ . '/../Views/course-detail.php';
        } catch (\Exception $e) {
            error_log('showCourse error: ' . $e->getMessage());
            include __DIR__ . '/../Views/404.php';
        }
    }

    private function getModulesForCourse($courseId)
    {
        try {
            $sql = "SELECT m.* FROM modules m 
                    INNER JOIN course_modules cm ON m.id = cm.module_id 
                    WHERE cm.course_id = ? 
                    ORDER BY m.code ASC";
            $statement = Database::query($sql, [$courseId]);
            return $statement->fetchAll(\PDO::FETCH_ASSOC) ?: [];
        } catch (\Exception $e) {
            error_log('getModulesForCourse error: ' . $e->getMessage());
            return [];
        }
    }

    public function saveCourse()
    {
        Auth::requireLogin();

        $courseId = isset($_POST['id']) ? (int) $_POST['id'] : null;
        $title = isset($_POST['title']) ? trim($_POST['title']) : '';
        $subjectAreaId = isset($_POST['subject_area_id']) ? (int) $_POST['subject_area_id'] : null;
        $type = isset($_POST['type']) ? trim($_POST['type']) : '';
        $durationYears = isset($_POST['duration_years']) ? (int) $_POST['duration_years'] : null;
        $description = isset($_POST['description']) ? trim($_POST['description']) : '';
        $partTimeAvailable = isset($_POST['part_time_available']) ? 1 : 0;
        $moduleIds = isset($_POST['module_ids']) ? array_filter(array_map('intval', $_POST['module_ids'])) : [];

        if (empty($title)) {
            $this->error = 'Course title is required';
        } elseif (strlen($title) < 3) {
            $this->error = 'Course title must be at least 3 characters';
        } elseif (strlen($title) > 255) {
            $this->error = 'Course title must not exceed 255 characters';
        } elseif (!$subjectAreaId) {
            $this->error = 'Subject area is required';
        } elseif (empty($type)) {
            $this->error = 'Course type is required';
        } elseif (!$durationYears || $durationYears < 1 || $durationYears > 10) {
            $this->error = 'Duration must be between 1 and 10 years';
        } elseif (empty($description)) {
            $this->error = 'Course description is required';
        }

        if (empty($this->error)) {
            $subjectArea = SubjectArea::getById($subjectAreaId);
            if (!$subjectArea) {
                $this->error = 'Selected subject area does not exist';
            }
        }

        if (empty($this->error)) {
            try {
                if ($courseId) {
                    Course::updateRecord($courseId, [
                        'title' => $title,
                        'subject_area_id' => $subjectAreaId,
                        'type' => $type,
                        'duration_years' => $durationYears,
                        'description' => $description,
                        'part_time_available' => $partTimeAvailable
                    ]);

                    $this->updateCourseModules($courseId, $moduleIds);

                    $this->success = 'Course updated successfully';
                } else {
                    $result = Course::create([
                        'title' => $title,
                        'subject_area_id' => $subjectAreaId,
                        'type' => $type,
                        'duration_years' => $durationYears,
                        'description' => $description,
                        'part_time_available' => $partTimeAvailable,
                        'created_by' => Auth::getUserId(),
                        'created_at' => date('Y-m-d H:i:s')
                    ]);

                    $courseId = is_array($result) ? $result['id'] : $result;

                    if ($courseId && !empty($moduleIds)) {
                        $this->addCourseModules($courseId, $moduleIds);
                    }

                    $this->success = 'Course created successfully';
                }

                header('Location: /courses?message=' . urlencode($this->success));
                exit;
            } catch (\Exception $e) {
                $this->error = 'An error occurred: ' . $e->getMessage();
                error_log('saveCourse error: ' . $e->getMessage());
            }
        }

        $courses = Course::getAll();
        $subjectAreas = SubjectArea::getAll();
        $editCourse = $courseId ? Course::getById($courseId) : null;
        $editModules = $courseId ? $this->getModulesForCourse($courseId) : [];
        $allModules = Module::getAll();

        include __DIR__ . '/../Views/courses.php';
    }

    private function addCourseModules($courseId, $moduleIds)
    {
        try {
            $sql = "INSERT INTO course_modules (course_id, module_id) VALUES (?, ?)";
            foreach ($moduleIds as $moduleId) {
                Database::execute($sql, [$courseId, $moduleId]);
            }
        } catch (\Exception $e) {
            error_log('addCourseModules error: ' . $e->getMessage());
            throw $e;
        }
    }

    private function updateCourseModules($courseId, $moduleIds)
    {
        try {
            $sql = "DELETE FROM course_modules WHERE course_id = ?";
            Database::execute($sql, [$courseId]);

            if (!empty($moduleIds)) {
                $this->addCourseModules($courseId, $moduleIds);
            }
        } catch (\Exception $e) {
            error_log('updateCourseModules error: ' . $e->getMessage());
            throw $e;
        }
    }

    public function deleteCourse($id)
    {
        Auth::requireLogin();

        try {
            $course = Course::getById($id);

            if (!$course) {
                $this->error = 'Course not found';
            } else {
                $sql = "DELETE FROM course_modules WHERE course_id = ?";
                Database::execute($sql, [$id]);

                Course::deleteRecord($id);

                $this->success = 'Course deleted successfully';
                header('Location: /courses?message=' . urlencode($this->success));
                exit;
            }
        } catch (\Exception $e) {
            error_log('deleteCourse error: ' . $e->getMessage());
            $this->error = 'Error deleting course: ' . $e->getMessage();
        }

        $courses = Course::getAll();
        $subjectAreas = SubjectArea::getAll();
        $allModules = Module::getAll();

        include __DIR__ . '/../Views/courses.php';
    }

    public function showSearchPage()
    {
        try {
            $subjectAreas = SubjectArea::getAll();
            $courseTypes = $this->getCourseTypes();

            $perPage = 10;
            $currentPage = isset($_GET['page']) ? max(1, (int) $_GET['page']) : 1;

            $searchResults = [];
            $searchPerformed = false;
            $totalPages = 0;

            if ($_SERVER['REQUEST_METHOD'] === 'POST') {
                $searchPerformed = true;
                $searchResults = $this->performSearchPaginated($currentPage, $perPage);
                $totalPages = $searchResults['totalPages'] ?? 0;
                $searchResults = $searchResults['courses'] ?? [];
            }

            include __DIR__ . '/../Views/course-search.php';
        } catch (\Exception $e) {
            error_log('showSearchPage error: ' . $e->getMessage());
            include __DIR__ . '/../Views/404.php';
        }
    }

    private function performSearchPaginated($page, $perPage)
    {
        try {
            $subjectAreaId = isset($_POST['subject_area_id']) && $_POST['subject_area_id'] !== '' ? (int) $_POST['subject_area_id'] : null;
            $type = isset($_POST['type']) && $_POST['type'] !== '' ? trim($_POST['type']) : null;
            $minDuration = isset($_POST['min_duration']) && $_POST['min_duration'] !== '' ? (int) $_POST['min_duration'] : null;
            $maxDuration = isset($_POST['max_duration']) && $_POST['max_duration'] !== '' ? (int) $_POST['max_duration'] : null;
            $partTimeOnly = isset($_POST['part_time_only']) && $_POST['part_time_only'] === 'on' ? true : null;

            if ($subjectAreaId === null && $type === null && $minDuration === null && $maxDuration === null && $partTimeOnly === null) {
                return ['courses' => [], 'totalPages' => 0];
            }

            $totalResults = Course::countSearchResults($subjectAreaId, $type, $minDuration, $maxDuration, $partTimeOnly);
            $totalPages = ceil($totalResults / $perPage);

            if ($page > $totalPages && $totalPages > 0) {
                $page = $totalPages;
            }

            $courses = Course::searchCoursesPaginated($page, $perPage, $subjectAreaId, $type, $minDuration, $maxDuration, $partTimeOnly);

            return [
                'courses' => $courses ?: [],
                'totalPages' => $totalPages,
                'totalResults' => $totalResults
            ];
        } catch (\Exception $e) {
            error_log('performSearchPaginated error: ' . $e->getMessage());
            return ['courses' => [], 'totalPages' => 0];
        }
    }

    private function performSearch()
    {
        try {
            $subjectAreaId = isset($_POST['subject_area_id']) && $_POST['subject_area_id'] !== '' ? (int) $_POST['subject_area_id'] : null;
            $type = isset($_POST['type']) && $_POST['type'] !== '' ? trim($_POST['type']) : null;
            $minDuration = isset($_POST['min_duration']) && $_POST['min_duration'] !== '' ? (int) $_POST['min_duration'] : null;
            $maxDuration = isset($_POST['max_duration']) && $_POST['max_duration'] !== '' ? (int) $_POST['max_duration'] : null;
            $partTimeOnly = isset($_POST['part_time_only']) && $_POST['part_time_only'] === 'on' ? true : null;

            if ($subjectAreaId === null && $type === null && $minDuration === null && $maxDuration === null && $partTimeOnly === null) {
                return [];
            }

            $courses = Course::searchCourses($subjectAreaId, $type, $minDuration, $maxDuration, $partTimeOnly);

            return $courses ?: [];
        } catch (\Exception $e) {
            error_log('performSearch error: ' . $e->getMessage());
            return [];
        }
    }

    private function getCourseTypes()
    {
        try {
            $sql = "SELECT DISTINCT type FROM courses ORDER BY type ASC";
            $statement = Database::query($sql, []);
            $results = $statement->fetchAll(\PDO::FETCH_ASSOC);

            $types = [];
            foreach ($results as $row) {
                if (!empty($row['type'])) {
                    $types[] = $row['type'];
                }
            }
            return $types;
        } catch (\Exception $e) {
            error_log('getCourseTypes error: ' . $e->getMessage());
            return [];
        }
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Controllers\EnquiryController.php
================================================================================
<?php

namespace App\Controllers;

use App\Models\Enquiry;
use App\Models\Course;
use App\Models\Database;
use App\Helpers\Auth;

class EnquiryController
{
    public function showForm()
    {
        $courses = Course::getAll();
        require __DIR__ . '/../Views/enquiry.php';
    }

    public function saveEnquiry()
    {
        if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
            http_response_code(405);
            die('Method not allowed');
        }

        $errors = [];

        $name = trim($_POST['name'] ?? '');
        $email = trim($_POST['email'] ?? '');
        $phone = trim($_POST['phone'] ?? '');
        $course_id = isset($_POST['course_id']) ? (int) $_POST['course_id'] : null;
        $message = trim($_POST['message'] ?? '');

        if (empty($name)) {
            $errors[] = 'Name is required';
        } elseif (strlen($name) > 150) {
            $errors[] = 'Name must not exceed 150 characters';
        }

        if (empty($email)) {
            $errors[] = 'Email is required';
        } elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            $errors[] = 'Invalid email address';
        } elseif (strlen($email) > 120) {
            $errors[] = 'Email must not exceed 120 characters';
        }

        if (!empty($phone) && strlen($phone) > 20) {
            $errors[] = 'Phone number must not exceed 20 characters';
        }

        if (empty($course_id)) {
            $errors[] = 'Please select a course';
        } else {
            $course = Course::getById($course_id);
            if (!$course) {
                $errors[] = 'Selected course does not exist';
            }
        }

        if (empty($message)) {
            $errors[] = 'Enquiry message is required';
        } elseif (strlen($message) < 10) {
            $errors[] = 'Enquiry message must be at least 10 characters';
        }

        if (!empty($errors)) {
            $courses = Course::getAll();
            $error = implode('<br>', $errors);
            require __DIR__ . '/../Views/enquiry.php';
            return;
        }

        try {
            Enquiry::create([
                'name' => $name,
                'email' => $email,
                'phone' => $phone,
                'course_id' => $course_id,
                'message' => $message,
                'status' => 'new',
                'created_at' => date('Y-m-d H:i:s')
            ]);

            header('Location: /enquiry?message=' . urlencode('Thank you! We have received your enquiry and will respond soon.'));
            exit;
        } catch (\Exception $e) {
            $courses = Course::getAll();
            $error = 'An error occurred while saving your enquiry. Please try again.';
            error_log('Enquiry save error: ' . $e->getMessage());
            require __DIR__ . '/../Views/enquiry.php';
        }
    }

    public function listEnquiries()
    {
        Auth::requireLogin();

        $filter = isset($_GET['filter']) ? $_GET['filter'] : 'all';
        $enquiries = [];

        try {
            if ($filter === 'pending') {
                $enquiries = Enquiry::findAllBy('status', 'new');
            } elseif ($filter === 'responded') {
                $stmt = Database::query(
                    'SELECT * FROM enquiries WHERE status IN ("responded", "closed") ORDER BY responded_at DESC, created_at DESC'
                );
                $enquiries = $stmt->fetchAll(\PDO::FETCH_ASSOC);
            } else {
                $enquiries = Enquiry::getAll();
                usort($enquiries, function ($a, $b) {
                    return strtotime($b['created_at']) - strtotime($a['created_at']);
                });
            }

            $enquiries = array_map(function ($enquiry) {
                $course = Course::getById($enquiry['course_id']);
                $enquiry['course_title'] = $course ? $course['title'] : 'Unknown Course';

                if (!empty($enquiry['responded_by'])) {
                    $stmt = Database::query(
                        'SELECT username FROM users WHERE id = ?',
                        [$enquiry['responded_by']]
                    );
                    $responder = $stmt->fetch(\PDO::FETCH_ASSOC);
                    $enquiry['responder_name'] = $responder ? $responder['username'] : 'Unknown User';
                }

                return $enquiry;
            }, $enquiries);
        } catch (\Exception $e) {
            error_log('List enquiries error: ' . $e->getMessage());
            $enquiries = [];
        }

        require __DIR__ . '/../Views/enquiries.php';
    }

    public function showEnquiry($id)
    {
        Auth::requireLogin();

        $enquiry = Enquiry::getById($id);
        if (!$enquiry) {
            http_response_code(404);
            require __DIR__ . '/../Views/404.php';
            return;
        }

        $course = Course::getById($enquiry['course_id']);
        $enquiry['course_title'] = $course ? $course['title'] : 'Unknown Course';

        if (!empty($enquiry['responded_by'])) {
            $stmt = Database::query(
                'SELECT username FROM users WHERE id = ?',
                [$enquiry['responded_by']]
            );
            $responder = $stmt->fetch(\PDO::FETCH_ASSOC);
            $enquiry['responder_name'] = $responder ? $responder['username'] : 'Unknown User';
        }

        require __DIR__ . '/../Views/enquiry-detail.php';
    }

    public function markResponded($id)
    {
        Auth::requireLogin();

        if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
            http_response_code(405);
            die('Method not allowed');
        }

        $enquiry = Enquiry::getById($id);
        if (!$enquiry) {
            http_response_code(404);
            die('Enquiry not found');
        }

        try {
            $userId = Auth::getUserId();
            Enquiry::updateRecord($id, [
                'status' => 'responded',
                'responded_by' => $userId,
                'responded_at' => date('Y-m-d H:i:s')
            ]);

            header('Location: /admin/enquiries?message=' . urlencode('Enquiry marked as responded'));
            exit;
        } catch (\Exception $e) {
            error_log('Mark responded error: ' . $e->getMessage());
            header('Location: /admin/enquiries?error=' . urlencode('An error occurred'));
            exit;
        }
    }

    public function deleteEnquiry($id)
    {
        Auth::requireLogin();

        $enquiry = Enquiry::getById($id);
        if (!$enquiry) {
            http_response_code(404);
            require __DIR__ . '/../Views/404.php';
            return;
        }

        try {
            Enquiry::deleteRecord($id);
            header('Location: /admin/enquiries?message=' . urlencode('Enquiry deleted'));
            exit;
        } catch (\Exception $e) {
            error_log('Delete enquiry error: ' . $e->getMessage());
            header('Location: /admin/enquiries?error=' . urlencode('An error occurred'));
            exit;
        }
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Controllers\ModuleController.php
================================================================================
<?php

namespace App\Controllers;

use App\Models\Module;
use App\Models\Database;
use App\Helpers\Auth;

class ModuleController
{
    private $error = '';
    private $success = '';

    public function listModules()
    {
        Auth::requireLogin();

        $modules = Module::getAll();
        $editModule = null;

        if (isset($_GET['edit'])) {
            $editId = (int) $_GET['edit'];
            $editModule = Module::getById($editId);
        }

        include __DIR__ . '/../Views/modules.php';
    }

    public function saveModule()
    {
        Auth::requireLogin();

        $moduleId = isset($_POST['id']) ? (int) $_POST['id'] : null;
        $code = isset($_POST['code']) ? strtoupper(trim($_POST['code'])) : '';
        $title = isset($_POST['title']) ? trim($_POST['title']) : '';
        $description = isset($_POST['description']) ? trim($_POST['description']) : '';

        if (empty($code)) {
            $this->error = 'Module code is required';
        } elseif (strlen($code) < 3) {
            $this->error = 'Module code must be at least 3 characters';
        } elseif (strlen($code) > 50) {
            $this->error = 'Module code must not exceed 50 characters';
        } elseif (!preg_match('/^[A-Z0-9]+$/', $code)) {
            $this->error = 'Module code can only contain letters and numbers';
        } elseif (empty($title)) {
            $this->error = 'Module title is required';
        } elseif (strlen($title) < 3) {
            $this->error = 'Module title must be at least 3 characters';
        } elseif (strlen($title) > 255) {
            $this->error = 'Module title must not exceed 255 characters';
        } elseif (empty($description)) {
            $this->error = 'Module description is required';
        }

        if (empty($this->error) && (!$moduleId || Module::getById($moduleId)['code'] !== $code)) {
            $existingModule = $this->getModuleByCode($code);
            if ($existingModule) {
                $this->error = 'A module with this code already exists';
            }
        }

        if (empty($this->error)) {
            try {
                if ($moduleId) {
                    Module::updateRecord($moduleId, [
                        'code' => $code,
                        'title' => $title,
                        'description' => $description
                    ]);
                    $this->success = 'Module updated successfully';
                } else {
                    Module::create([
                        'code' => $code,
                        'title' => $title,
                        'description' => $description
                    ]);
                    $this->success = 'Module created successfully';
                }

                header('Location: /modules?message=' . urlencode($this->success));
                exit;
            } catch (\Exception $e) {
                if (strpos($e->getMessage(), 'Duplicate') !== false) {
                    $this->error = 'A module with this code already exists';
                } else {
                    $this->error = 'An error occurred: ' . $e->getMessage();
                }
                error_log('saveModule error: ' . $e->getMessage());
            }
        }

        $modules = Module::getAll();
        $editModule = $moduleId ? Module::getById($moduleId) : null;

        include __DIR__ . '/../Views/modules.php';
    }

    public function deleteModule($id)
    {
        Auth::requireLogin();

        try {
            $module = Module::getById($id);

            if (!$module) {
                $this->error = 'Module not found';
            } else {
                $courseCount = $this->countCoursesWithModule($id);
                if ($courseCount > 0) {
                    $this->error = "Cannot delete this module - it is assigned to $courseCount course(s). Remove it from those courses first.";
                } else {
                    Module::deleteRecord($id);
                    $this->success = 'Module deleted successfully';
                    header('Location: /modules?message=' . urlencode($this->success));
                    exit;
                }
            }
        } catch (\Exception $e) {
            error_log('deleteModule error: ' . $e->getMessage());
            $this->error = 'Error deleting module: ' . $e->getMessage();
        }

        $modules = Module::getAll();
        $editModule = null;

        include __DIR__ . '/../Views/modules.php';
    }

    private function getModuleByCode($code)
    {
        try {
            $sql = "SELECT * FROM modules WHERE code = ?";
            $statement = Database::query($sql, [$code]);
            return $statement->fetch(\PDO::FETCH_ASSOC);
        } catch (\Exception $e) {
            error_log('getModuleByCode error: ' . $e->getMessage());
            return null;
        }
    }

    private function countCoursesWithModule($moduleId)
    {
        try {
            $sql = "SELECT COUNT(*) as count FROM course_modules WHERE module_id = ?";
            $statement = Database::query($sql, [$moduleId]);
            $result = $statement->fetch(\PDO::FETCH_ASSOC);
            return $result['count'] ?? 0;
        } catch (\Exception $e) {
            error_log('countCoursesWithModule error: ' . $e->getMessage());
            return 0;
        }
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Controllers\SubjectAreaController.php
================================================================================
<?php

namespace App\Controllers;

use App\Models\SubjectArea;
use App\Models\Course;
use App\Helpers\Auth;

class SubjectAreaController
{
    private $error = '';
    private $success = '';

    public function listSubjectAreas()
    {
        Auth::requireLogin();

        $subjectAreas = SubjectArea::getAll();
        $editSubjectArea = null;

        if (isset($_GET['edit'])) {
            $editSubjectArea = SubjectArea::getById($_GET['edit']);
        }

        include __DIR__ . '/../Views/subject-areas.php';
    }

    public function showSubjectArea($id)
    {
        try {
            $subjectArea = SubjectArea::getById($id);

            if (!$subjectArea) {
                include __DIR__ . '/../Views/404.php';
                return;
            }

            $perPage = 10;
            $currentPage = isset($_GET['page']) ? max(1, (int) $_GET['page']) : 1;

            $totalCourses = Course::countBySubjectArea($id);
            $totalPages = ceil($totalCourses / $perPage);

            if ($currentPage > $totalPages && $totalPages > 0) {
                $currentPage = $totalPages;
            }

            $courses = Course::getCoursesBySubjectAreaPaginated($id, $currentPage, $perPage);

            include __DIR__ . '/../Views/subject-area-detail.php';
        } catch (\Exception $e) {
            error_log('showSubjectArea error: ' . $e->getMessage());
            include __DIR__ . '/../Views/404.php';
        }
    }

    public function saveSubjectArea()
    {
        Auth::requireLogin();

        $subjectAreaId = isset($_POST['id']) ? $_POST['id'] : null;
        $name = isset($_POST['name']) ? trim($_POST['name']) : '';

        if (empty($name)) {
            $this->error = 'Subject area name is required';
        } elseif (strlen($name) < 3) {
            $this->error = 'Subject area name must be at least 3 characters';
        } elseif (strlen($name) > 150) {
            $this->error = 'Subject area name must not exceed 150 characters';
        }

        if (empty($this->error)) {
            try {
                if ($subjectAreaId) {
                    SubjectArea::updateSubjectAreaName($subjectAreaId, $name);
                    ;
                    $this->success = 'Subject area updated successfully';
                } else {
                    SubjectArea::createSubjectArea($name, Auth::getUserId());
                    $this->success = 'Subject area created successfully';
                }
            } catch (\Exception $e) {
                if (strpos($e->getMessage(), 'Duplicate') !== false) {
                    $this->error = 'A subject area with this name already exists';
                } else {
                    $this->error = 'An error occurred: ' . $e->getMessage();
                }
            }
        }

        if (empty($this->error)) {
            header('Location: /subject-areas?message=' . urlencode($this->success));
            exit;
        }

        $subjectAreas = SubjectArea::getAll();
        $editSubjectArea = $subjectAreaId ? SubjectArea::getById($subjectAreaId) : null;

        include __DIR__ . '/../Views/subject-areas.php';
    }

    public function deleteSubjectArea($id)
    {
        Auth::requireLogin();

        try {
            $subjectArea = SubjectArea::getById($id);

            if (!$subjectArea) {
                $this->error = 'Subject area not found';
            } else {
                SubjectArea::deleteRecord($id);
                $this->success = 'Subject area deleted successfully';
                header('Location: /subject-areas?message=' . urlencode($this->success));
                exit;
            }
        } catch (\Exception $e) {
            error_log('deleteSubjectArea error: ' . $e->getMessage());
            $this->error = 'Error deleting subject area: ' . $e->getMessage();
        }

        $subjectAreas = SubjectArea::getAll();

        include __DIR__ . '/../Views/subject-areas.php';
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Controllers\UserController.php
================================================================================
<?php

namespace App\Controllers;

use App\Models\User;
use App\Helpers\Auth;

class UserController
{
    public function listUsers()
    {
        Auth::requireSuperAdmin();

        $users = User::getAll();
        $message = null;
        $error = null;

        if (isset($_GET['message'])) {
            if ($_GET['message'] === 'created') {
                $message = 'User created successfully';
            } elseif ($_GET['message'] === 'deleted') {
                $message = 'User deleted successfully';
            }
        }

        require __DIR__ . '/../Views/users.php';
    }

    public function createUser()
    {
        Auth::requireSuperAdmin();

        $error = null;
        $success = null;

        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            $username = $_POST['username'] ?? '';
            $password = $_POST['password'] ?? '';
            $confirm_password = $_POST['confirm_password'] ?? '';

            if (empty($username) || empty($password)) {
                $error = 'Username and password are required';
            } elseif ($password !== $confirm_password) {
                $error = 'Passwords do not match';
            } elseif (strlen($password) < 6) {
                $error = 'Password must be at least 6 characters';
            } else {
                $existingUser = User::getUserByUsername($username);
                
                if ($existingUser) {
                    $error = 'Username already exists';
                } else {
                    try {
                        User::createUser($username, $password, 'staff');
                        Auth::redirect('/users?message=created');
                    } catch (\Exception $e) {
                        $error = 'Error creating user: ' . $e->getMessage();
                    }
                }
            }
        }

        require __DIR__ . '/../Views/create-user.php';
    }

    public function deleteUser()
    {
        Auth::requireSuperAdmin();

        $userId = $_GET['id'] ?? null;
        $error = null;

        if (!$userId) {
            http_response_code(404);
            die('User ID not provided');
        }

        if ($userId == 1) {
            $error = 'Cannot delete the superadmin account';
        } elseif ($_SERVER['REQUEST_METHOD'] === 'POST') {
            try {
                $result = User::deleteRecord($userId);
                
                if ($result > 0) {
                    Auth::redirect('/users?message=deleted');
                } else {
                    $error = 'User not found';
                }
            } catch (\Exception $e) {
                $error = 'Error deleting user: ' . $e->getMessage();
            }
        }

        $user = User::getById($userId);

        if (!$user) {
            http_response_code(404);
            die('User not found');
        }

        require __DIR__ . '/../Views/delete-user.php';
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Helpers\Auth.php
================================================================================
<?php

namespace App\Helpers;

class Auth
{
    const ROLE_SUPERADMIN = 'superadmin';
    const ROLE_STAFF = 'staff';

    public static function startSession()
    {
        if (session_status() === PHP_SESSION_NONE) {
            session_start();
        }
    }

    public static function login($user)
    {
        self::startSession();
        $_SESSION['user_id'] = $user['id'];
        $_SESSION['username'] = $user['username'];
        $_SESSION['role'] = $user['role'];
        $_SESSION['logged_in'] = true;
    }

    public static function logout()
    {
        self::startSession();
        session_destroy();
        session_unset();
    }

    public static function isLoggedIn()
    {
        self::startSession();
        return isset($_SESSION['logged_in']) && $_SESSION['logged_in'] === true;
    }

    public static function getUser()
    {
        self::startSession();
        
        if (!self::isLoggedIn()) {
            return null;
        }

        return [
            'id' => $_SESSION['user_id'] ?? null,
            'username' => $_SESSION['username'] ?? null,
            'role' => $_SESSION['role'] ?? null
        ];
    }

    public static function getUserId()
    {
        self::startSession();
        return $_SESSION['user_id'] ?? null;
    }

    public static function getUsername()
    {
        self::startSession();
        return $_SESSION['username'] ?? null;
    }

    public static function getRole()
    {
        self::startSession();
        return $_SESSION['role'] ?? null;
    }

    public static function isSuperAdmin()
    {
        return self::getRole() === self::ROLE_SUPERADMIN;
    }

    public static function isStaff()
    {
        return self::getRole() === self::ROLE_STAFF;
    }

    public static function requireLogin()
    {
        if (!self::isLoggedIn()) {
            header('Location: /login');
            exit;
        }
    }

    public static function requireSuperAdmin()
    {
        self::requireLogin();
        
        if (!self::isSuperAdmin()) {
            http_response_code(403);
            die('Access Denied: Superadmin privilege required');
        }
    }

    public static function requireStaffOrAdmin()
    {
        self::requireLogin();
    }

    public static function redirect($url)
    {
        header('Location: ' . $url);
        exit;
    }

    public static function setFlash($key, $value)
    {
        self::startSession();
        $_SESSION['flash'][$key] = $value;
    }

    public static function getFlash($key)
    {
        self::startSession();
        
        if (isset($_SESSION['flash'][$key])) {
            $value = $_SESSION['flash'][$key];
            unset($_SESSION['flash'][$key]);
            return $value;
        }

        return null;
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Helpers\HeaderHelper.php
================================================================================
<?php

namespace App\Helpers;

use App\Models\SubjectArea;

class HeaderHelper
{
    public static function getSubjectAreasForMenu()
    {
        try {
            $areas = SubjectArea::getAll();
            return is_array($areas) ? $areas : [];
        } catch (\Exception $e) {
            error_log('HeaderHelper::getSubjectAreasForMenu error: ' . $e->getMessage());
            return [];
        }
    }

    public static function renderSubjectAreasMenu()
    {
        $areas = self::getSubjectAreasForMenu();
        
        if (empty($areas)) {
            echo '<li>Subject Areas<ul><li><a href="#">No areas available</a></li></ul></li>';
            return;
        }
        
        echo '<li>Subject Areas<ul>';
        echo '<li><a href="/course-search">Search Courses</a></li>';
        echo '<li style="border-top: 1px solid #ddd; margin: 5px 0; padding-top: 5px;"></li>';
        foreach ($areas as $area) {
            $name = htmlspecialchars($area['name']);
            $id = (int)$area['id'];
            echo "<li><a href=\"/subject-area/{$id}\">{$name}</a></li>";
        }
        echo '</ul></li>';
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Models\BaseModel.php
================================================================================
<?php

namespace App\Models;

abstract class BaseModel
{
    protected static $table;

    public static function setTable($tableName)
    {
        static::$table = $tableName;
    }

    public static function getTable()
    {
        if (!static::$table) {
            throw new \Exception('Table name not defined for ' . static::class);
        }
        return static::$table;
    }

    public static function getAll()
    {
        try {
            $table = static::getTable();
            return Database::select($table);
        } catch (\Exception $e) {
            error_log('getAll error: ' . $e->getMessage());
            return [];
        }
    }

    public static function getById($id)
    {
        try {
            $table = static::getTable();
            return Database::selectOne($table, ['id'], [$id]);
        } catch (\Exception $e) {
            error_log('getById error: ' . $e->getMessage());
            return null;
        }
    }

    public static function create($data)
    {
        try {
            $table = static::getTable();
            
            if (empty($data) || !is_array($data)) {
                throw new \Exception('Invalid data for insert');
            }

            return Database::insert($table, $data);
        } catch (\Exception $e) {
            error_log('create error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function updateRecord($id, $data)
    {
        try {
            $table = static::getTable();
            
            if (empty($data) || !is_array($data)) {
                throw new \Exception('Invalid data for update');
            }

            if (!$id) {
                throw new \Exception('ID is required for update');
            }

            return Database::update($table, $id, $data);
        } catch (\Exception $e) {
            error_log('updateRecord error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function deleteRecord($id)
    {
        try {
            $table = static::getTable();
            
            if (!$id) {
                throw new \Exception('ID is required for delete');
            }

            return Database::delete($table, $id);
        } catch (\Exception $e) {
            error_log('deleteRecord error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function count()
    {
        try {
            $table = static::getTable();
            return Database::count($table);
        } catch (\Exception $e) {
            error_log('count error: ' . $e->getMessage());
            return 0;
        }
    }

    public static function findBy($column, $value)
    {
        try {
            $table = static::getTable();
            return Database::selectOne($table, [$column], [$value]);
        } catch (\Exception $e) {
            error_log('findBy error: ' . $e->getMessage());
            return null;
        }
    }

    public static function findAllBy($column, $value)
    {
        try {
            $table = static::getTable();
            return Database::select($table, [$column], [$value]);
        } catch (\Exception $e) {
            error_log('findAllBy error: ' . $e->getMessage());
            return [];
        }
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Models\Course.php
================================================================================
<?php

namespace App\Models;

class Course extends BaseModel
{
    protected static $table = 'courses';

    public static function getCoursesBySubjectArea($subjectAreaId)
    {
        try {
            return static::findAllBy('subject_area_id', $subjectAreaId);
        } catch (\Exception $e) {
            error_log('getCoursesBySubjectArea error: ' . $e->getMessage());
            return [];
        }
    }

    public static function getFullTimeCourses()
    {
        try {
            return Database::select(static::getTable(), ['part_time_available'], [0]);
        } catch (\Exception $e) {
            error_log('getFullTimeCourses error: ' . $e->getMessage());
            return [];
        }
    }

    public static function getPartTimeCourses()
    {
        try {
            return Database::select(static::getTable(), ['part_time_available'], [1]);
        } catch (\Exception $e) {
            error_log('getPartTimeCourses error: ' . $e->getMessage());
            return [];
        }
    }

    public static function getCoursesByDuration($years)
    {
        try {
            return static::findAllBy('duration_years', $years);
        } catch (\Exception $e) {
            error_log('getCoursesByDuration error: ' . $e->getMessage());
            return [];
        }
    }

    public static function getCoursesByType($type)
    {
        try {
            return static::findAllBy('type', $type);
        } catch (\Exception $e) {
            error_log('getCoursesByType error: ' . $e->getMessage());
            return [];
        }
    }

    public static function createCourse($title, $subjectAreaId, $type, $durationYears, $description, $createdBy, $partTimeAvailable = 0)
    {
        try {
            return static::create([
                'title' => $title,
                'subject_area_id' => $subjectAreaId,
                'type' => $type,
                'duration_years' => $durationYears,
                'description' => $description,
                'created_by' => $createdBy,
                'part_time_available' => $partTimeAvailable,
                'created_at' => date('Y-m-d H:i:s')
            ]);
        } catch (\Exception $e) {
            error_log('createCourse error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function updateCourseDetails($courseId, $data)
    {
        try {
            $allowedFields = ['title', 'subject_area_id', 'type', 'duration_years', 'description', 'part_time_available'];
            $updateData = [];

            foreach ($allowedFields as $field) {
                if (isset($data[$field])) {
                    $updateData[$field] = $data[$field];
                }
            }

            if (empty($updateData)) {
                throw new \Exception('No valid fields to update');
            }

            return static::updateRecord($courseId, $updateData);
        } catch (\Exception $e) {
            error_log('updateCourseDetails error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function searchCourses($subjectAreaId = null, $type = null, $minDuration = null, $maxDuration = null, $partTimeOnly = null)
    {
        try {
            $sql = "SELECT * FROM " . static::getTable() . " WHERE 1=1";
            $params = [];

            if ($subjectAreaId !== null && $subjectAreaId !== '') {
                $sql .= " AND subject_area_id = ?";
                $params[] = (int) $subjectAreaId;
            }

            if ($type !== null && $type !== '') {
                $sql .= " AND type = ?";
                $params[] = $type;
            }

            if ($minDuration !== null && $minDuration !== '') {
                $sql .= " AND duration_years >= ?";
                $params[] = (int) $minDuration;
            }

            if ($maxDuration !== null && $maxDuration !== '') {
                $sql .= " AND duration_years <= ?";
                $params[] = (int) $maxDuration;
            }

            if ($partTimeOnly === true) {
                $sql .= " AND part_time_available = 1";
            }

            $sql .= " ORDER BY title ASC";

            $statement = Database::query($sql, $params);
            return $statement->fetchAll(\PDO::FETCH_ASSOC) ?: [];
        } catch (\Exception $e) {
            error_log('searchCourses error: ' . $e->getMessage());
            return [];
        }
    }

    public static function countBySubjectArea($subjectAreaId)
    {
        try {
            $sql = "SELECT COUNT(*) as count FROM " . static::getTable() . " WHERE subject_area_id = ?";
            $statement = Database::query($sql, [(int) $subjectAreaId]);
            $result = $statement->fetch(\PDO::FETCH_ASSOC);
            return $result['count'] ?? 0;
        } catch (\Exception $e) {
            error_log('countBySubjectArea error: ' . $e->getMessage());
            return 0;
        }
    }

    public static function getCoursesBySubjectAreaPaginated($subjectAreaId, $page = 1, $perPage = 10)
    {
        try {
            $offset = ($page - 1) * $perPage;
            $sql = "SELECT * FROM " . static::getTable() . " 
                    WHERE subject_area_id = ? 
                    ORDER BY title ASC 
                    LIMIT ? OFFSET ?";
            $statement = Database::query($sql, [(int) $subjectAreaId, (int) $perPage, (int) $offset]);
            return $statement->fetchAll(\PDO::FETCH_ASSOC) ?: [];
        } catch (\Exception $e) {
            error_log('getCoursesBySubjectAreaPaginated error: ' . $e->getMessage());
            return [];
        }
    }

    public static function countSearchResults($subjectAreaId = null, $type = null, $minDuration = null, $maxDuration = null, $partTimeOnly = null)
    {
        try {
            $sql = "SELECT COUNT(*) as count FROM " . static::getTable() . " WHERE 1=1";
            $params = [];

            if ($subjectAreaId !== null && $subjectAreaId !== '') {
                $sql .= " AND subject_area_id = ?";
                $params[] = (int) $subjectAreaId;
            }

            if ($type !== null && $type !== '') {
                $sql .= " AND type = ?";
                $params[] = $type;
            }

            if ($minDuration !== null && $minDuration !== '') {
                $sql .= " AND duration_years >= ?";
                $params[] = (int) $minDuration;
            }

            if ($maxDuration !== null && $maxDuration !== '') {
                $sql .= " AND duration_years <= ?";
                $params[] = (int) $maxDuration;
            }

            if ($partTimeOnly === true) {
                $sql .= " AND part_time_available = 1";
            }

            $statement = Database::query($sql, $params);
            $result = $statement->fetch(\PDO::FETCH_ASSOC);
            return $result['count'] ?? 0;
        } catch (\Exception $e) {
            error_log('countSearchResults error: ' . $e->getMessage());
            return 0;
        }
    }

    public static function searchCoursesPaginated($page = 1, $perPage = 10, $subjectAreaId = null, $type = null, $minDuration = null, $maxDuration = null, $partTimeOnly = null)
    {
        try {
            $offset = ($page - 1) * $perPage;
            $sql = "SELECT * FROM " . static::getTable() . " WHERE 1=1";
            $params = [];

            if ($subjectAreaId !== null && $subjectAreaId !== '') {
                $sql .= " AND subject_area_id = ?";
                $params[] = (int) $subjectAreaId;
            }

            if ($type !== null && $type !== '') {
                $sql .= " AND type = ?";
                $params[] = $type;
            }

            if ($minDuration !== null && $minDuration !== '') {
                $sql .= " AND duration_years >= ?";
                $params[] = (int) $minDuration;
            }

            if ($maxDuration !== null && $maxDuration !== '') {
                $sql .= " AND duration_years <= ?";
                $params[] = (int) $maxDuration;
            }

            if ($partTimeOnly === true) {
                $sql .= " AND part_time_available = 1";
            }

            $sql .= " ORDER BY title ASC LIMIT ? OFFSET ?";
            $params[] = (int) $perPage;
            $params[] = (int) $offset;

            $statement = Database::query($sql, $params);
            return $statement->fetchAll(\PDO::FETCH_ASSOC) ?: [];
        } catch (\Exception $e) {
            error_log('searchCoursesPaginated error: ' . $e->getMessage());
            return [];
        }
    }
}




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Models\Database.php
================================================================================
<?php

namespace App\Models;

use PDO;
use PDOException;

class Database
{
    private static $connection;

    public static function connect()
    {
        if (self::$connection === null) {
            try {
                $host = DB_HOST;
                $name = DB_NAME;
                $user = DB_USER;
                $pass = DB_PASS;
                $port = DB_PORT;

                $dsn = "mysql:host=$host;port=$port;dbname=$name;charset=utf8mb4";
                
                self::$connection = new PDO(
                    $dsn,
                    $user,
                    $pass,
                    [
                        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
                        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
                        PDO::ATTR_EMULATE_PREPARES => false,
                    ]
                );
            } catch (PDOException $e) {
                die('Database connection failed: ' . $e->getMessage());
            }
        }

        return self::$connection;
    }

    public static function query($sql, $params = [])
    {
        try {
            $connection = self::connect();
            $statement = $connection->prepare($sql);
            $statement->execute($params);
            return $statement;
        } catch (PDOException $e) {
            throw new PDOException('Query error: ' . $e->getMessage());
        }
    }

    public static function execute($sql, $params = [])
    {
        return self::query($sql, $params);
    }

    public static function select($table, $where = [], $params = [])
    {
        try {
            $sql = "SELECT * FROM $table";

            if (!empty($where)) {
                $conditions = [];
                foreach ($where as $column) {
                    $conditions[] = "$column = ?";
                }
                $sql .= " WHERE " . implode(" AND ", $conditions);
            }

            $statement = self::query($sql, $params);
            return $statement->fetchAll();
        } catch (PDOException $e) {
            throw new PDOException('Select error: ' . $e->getMessage());
        }
    }

    public static function selectOne($table, $where = [], $params = [])
    {
        try {
            $sql = "SELECT * FROM $table";

            if (!empty($where)) {
                $conditions = [];
                foreach ($where as $column) {
                    $conditions[] = "$column = ?";
                }
                $sql .= " WHERE " . implode(" AND ", $conditions);
            }

            $sql .= " LIMIT 1";
            $statement = self::query($sql, $params);
            return $statement->fetch();
        } catch (PDOException $e) {
            throw new PDOException('SelectOne error: ' . $e->getMessage());
        }
    }

    public static function insert($table, $data)
    {
        try {
            $columns = array_keys($data);
            $placeholders = array_fill(0, count($columns), '?');
            
            $sql = "INSERT INTO $table (" . implode(', ', $columns) . ") VALUES (" . implode(', ', $placeholders) . ")";
            $values = array_values($data);
            
            $statement = self::query($sql, $values);
            return [
                'id' => self::connect()->lastInsertId(),
                'rows' => $statement->rowCount()
            ];
        } catch (PDOException $e) {
            throw new PDOException('Insert error: ' . $e->getMessage());
        }
    }

    public static function update($table, $id, $data)
    {
        try {
            $columns = array_keys($data);
            $sets = [];
            
            foreach ($columns as $column) {
                $sets[] = "$column = ?";
            }

            $sql = "UPDATE $table SET " . implode(', ', $sets) . " WHERE id = ?";
            $values = array_values($data);
            $values[] = $id;

            $statement = self::query($sql, $values);
            return $statement->rowCount();
        } catch (PDOException $e) {
            throw new PDOException('Update error: ' . $e->getMessage());
        }
    }

    public static function delete($table, $id)
    {
        try {
            $sql = "DELETE FROM $table WHERE id = ?";
            $statement = self::query($sql, [$id]);
            return $statement->rowCount();
        } catch (PDOException $e) {
            throw new PDOException('Delete error: ' . $e->getMessage());
        }
    }

    public static function count($table, $where = [], $params = [])
    {
        try {
            $sql = "SELECT COUNT(*) as total FROM $table";

            if (!empty($where)) {
                $conditions = [];
                foreach ($where as $column) {
                    $conditions[] = "$column = ?";
                }
                $sql .= " WHERE " . implode(" AND ", $conditions);
            }

            $statement = self::query($sql, $params);
            $result = $statement->fetch();
            return $result['total'] ?? 0;
        } catch (PDOException $e) {
            throw new PDOException('Count error: ' . $e->getMessage());
        }
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Models\Enquiry.php
================================================================================
<?php

namespace App\Models;

class Enquiry extends BaseModel
{
    protected static $table = 'enquiries';

    public static function getEnquiriesByCourse($courseId)
    {
        try {
            return static::findAllBy('course_id', $courseId);
        } catch (\Exception $e) {
            error_log('getEnquiriesByCourse error: ' . $e->getMessage());
            return [];
        }
    }

    public static function getEnquiriesByStatus($status)
    {
        try {
            return static::findAllBy('status', $status);
        } catch (\Exception $e) {
            error_log('getEnquiriesByStatus error: ' . $e->getMessage());
            return [];
        }
    }

    public static function createEnquiry($name, $email, $phone, $courseId, $message)
    {
        try {
            return static::create([
                'name' => $name,
                'email' => $email,
                'phone' => $phone,
                'course_id' => $courseId,
                'message' => $message,
                'status' => 'new',
                'created_at' => date('Y-m-d H:i:s')
            ]);
        } catch (\Exception $e) {
            error_log('createEnquiry error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function respondToEnquiry($enquiryId, $respondedBy)
    {
        try {
            return static::updateRecord($enquiryId, [
                'status' => 'responded',
                'responded_by' => $respondedBy,
                'responded_at' => date('Y-m-d H:i:s')
            ]);
        } catch (\Exception $e) {
            error_log('respondToEnquiry error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function closeEnquiry($enquiryId)
    {
        try {
            return static::updateRecord($enquiryId, [
                'status' => 'closed'
            ]);
        } catch (\Exception $e) {
            error_log('closeEnquiry error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function getNewEnquiries()
    {
        try {
            return static::findAllBy('status', 'new');
        } catch (\Exception $e) {
            error_log('getNewEnquiries error: ' . $e->getMessage());
            return [];
        }
    }

    public static function getEnquiriesByEmail($email)
    {
        try {
            return static::findAllBy('email', $email);
        } catch (\Exception $e) {
            error_log('getEnquiriesByEmail error: ' . $e->getMessage());
            return [];
        }
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Models\Module.php
================================================================================
<?php

namespace App\Models;

class Module extends BaseModel
{
    protected static $table = 'modules';

    public static function getModuleByCode($code)
    {
        try {
            return static::findBy('code', $code);
        } catch (\Exception $e) {
            error_log('getModuleByCode error: ' . $e->getMessage());
            return null;
        }
    }

    public static function createModule($code, $title, $description)
    {
        try {
            return static::create([
                'code' => $code,
                'title' => $title,
                'description' => $description
            ]);
        } catch (\Exception $e) {
            error_log('createModule error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function searchByTitle($keyword)
    {
        try {
            $table = static::getTable();
            $sql = "SELECT * FROM $table WHERE title LIKE ?";
            $statement = Database::query($sql, ['%' . $keyword . '%']);
            return $statement->fetchAll();
        } catch (\Exception $e) {
            error_log('searchByTitle error: ' . $e->getMessage());
            return [];
        }
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Models\SubjectArea.php
================================================================================
<?php

namespace App\Models;

class SubjectArea extends BaseModel
{
    protected static $table = 'subject_areas';

    public static function getSubjectAreaByName($name)
    {
        try {
            return static::findBy('name', $name);
        } catch (\Exception $e) {
            error_log('getSubjectAreaByName error: ' . $e->getMessage());
            return null;
        }
    }

    public static function createSubjectArea($name, $createdBy)
    {
        try {
            return static::create([
                'name' => $name,
                'created_by' => $createdBy,
                'created_at' => date('Y-m-d H:i:s')
            ]);
        } catch (\Exception $e) {
            error_log('createSubjectArea error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function updateSubjectAreaName($subjectAreaId, $newName)
    {
        try {
            return static::updateRecord($subjectAreaId, [
                'name' => $newName
            ]);
        } catch (\Exception $e) {
            error_log('updateSubjectAreaName error: ' . $e->getMessage());
            throw $e;
        }
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Models\User.php
================================================================================
<?php

namespace App\Models;

class User extends BaseModel
{
    protected static $table = 'users';

    public static function authenticateUser($username, $password)
    {
        try {
            $user = static::findBy('username', $username);
            
            if (!$user) {
                return null;
            }

            if (password_verify($password, $user['password'])) {
                return $user;
            }

            return null;
        } catch (\Exception $e) {
            error_log('authenticateUser error: ' . $e->getMessage());
            return null;
        }
    }

    public static function getUserByUsername($username)
    {
        try {
            return static::findBy('username', $username);
        } catch (\Exception $e) {
            error_log('getUserByUsername error: ' . $e->getMessage());
            return null;
        }
    }

    public static function createUser($username, $password, $role = 'staff')
    {
        try {
            $hashedPassword = password_hash($password, PASSWORD_BCRYPT);
            
            return static::create([
                'username' => $username,
                'password' => $hashedPassword,
                'role' => $role,
                'created_at' => date('Y-m-d H:i:s')
            ]);
        } catch (\Exception $e) {
            error_log('createUser error: ' . $e->getMessage());
            throw $e;
        }
    }

    public static function getUsersByRole($role)
    {
        try {
            return static::findAllBy('role', $role);
        } catch (\Exception $e) {
            error_log('getUsersByRole error: ' . $e->getMessage());
            return [];
        }
    }

    public static function updateUserPassword($userId, $newPassword)
    {
        try {
            $hashedPassword = password_hash($newPassword, PASSWORD_BCRYPT);
            
            return static::updateRecord($userId, [
                'password' => $hashedPassword
            ]);
        } catch (\Exception $e) {
            error_log('updateUserPassword error: ' . $e->getMessage());
            throw $e;
        }
    }
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\404.php
================================================================================
<!doctype html>
<html>
	<head>
		<title>Page Not Found - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			.error-container {
				text-align: center;
				padding: 40px 20px;
			}
			.error-container h1 {
				font-size: 72px;
				color: #d32f2f;
				margin: 0;
			}
			.error-container p {
				font-size: 18px;
				color: #666;
				margin: 20px 0;
			}
			.error-container a {
				display: inline-block;
				margin-top: 20px;
				padding: 12px 30px;
				background: #333;
				color: white;
				text-decoration: none;
				border-radius: 4px;
				transition: background 0.3s;
			}
			.error-container a:hover {
				background: #555;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<li>Subject Areas
					<ul>
                        <li><a href="#">Computing</a></li>
                        <li><a href="#">History</a></li>
                        <li><a href="#">Science</a></li>
					</ul>
				</li>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<div class="error-container">
				<h1>404</h1>
				<p>Page Not Found</p>
				<p>The page you are looking for does not exist.</p>
				<a href="/">Return to Home</a>
			</div>
		</main>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\admin.php
================================================================================
<!doctype html>
<html>
	<head>
		<title>Admin Dashboard - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			.dashboard-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 30px;
			}
			.dashboard-header h1 {
				margin: 0;
			}
			.user-info {
				text-align: right;
				font-size: 14px;
			}
			.user-info p {
				margin: 5px 0;
			}
			.btn-logout {
				background: #d32f2f;
				color: white;
				padding: 10px 20px;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				text-decoration: none;
				display: inline-block;
				margin-top: 10px;
			}
			.btn-logout:hover {
				background: #b71c1c;
			}
			.dashboard-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
				gap: 20px;
				margin-top: 20px;
			}
			.dashboard-card {
				background: white;
				padding: 25px;
				border-radius: 8px;
				box-shadow: 0 2px 8px rgba(0,0,0,0.1);
				text-align: center;
				text-decoration: none;
				color: inherit;
				transition: transform 0.2s, box-shadow 0.2s;
			}
			.dashboard-card:hover {
				transform: translateY(-4px);
				box-shadow: 0 4px 16px rgba(0,0,0,0.15);
			}
			.dashboard-card h3 {
				margin: 0 0 15px 0;
				color: #333;
			}
			.dashboard-card p {
				margin: 0 0 15px 0;
				color: #666;
				font-size: 14px;
			}
			.card-icon {
				font-size: 40px;
				margin-bottom: 10px;
			}
			.btn-action {
				background: #1976d2;
				color: white;
				padding: 10px 20px;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				text-decoration: none;
				display: inline-block;
				transition: background 0.3s;
			}
			.btn-action:hover {
				background: #1565c0;
			}
			.card-superadmin {
				border: 2px solid #ffebee;
				background: #fffcfd;
			}
			.card-superadmin .card-icon {
				color: #c62828;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<div class="dashboard-header">
				<div>
					<h1>Admin Dashboard</h1>
				</div>
				<div class="user-info">
					<p>Welcome, <strong><?php echo htmlspecialchars(\App\Helpers\Auth::getUsername()); ?></strong></p>
					<?php if (\App\Helpers\Auth::isSuperAdmin()): ?>
						<p style="color: #c62828; font-weight: 600;">Superadmin</p>
					<?php endif; ?>
					<a href="/logout" class="btn-logout">Logout</a>
				</div>
			</div>

			<h2>Management Options</h2>

			<div class="dashboard-grid">
				<?php if (\App\Helpers\Auth::isSuperAdmin()): ?>
					<a href="/users" class="dashboard-card card-superadmin">
						<div class="card-icon">ðŸ‘¥</div>
						<h3>Manage Staff</h3>
						<p>Add or remove staff members</p>
						<button class="btn-action">Manage Staff</button>
					</a>
				<?php endif; ?>

				<a href="/subject-areas" class="dashboard-card">
					<div class="card-icon">ðŸ“š</div>
					<h3>Subject Areas</h3>
					<p>Manage course categories</p>
					<button class="btn-action">Manage Areas</button>
				</a>

				<a href="/courses" class="dashboard-card">
					<div class="card-icon">ðŸŽ“</div>
					<h3>Courses</h3>
					<p>Add and manage courses</p>
					<button class="btn-action">Manage Courses</button>
				</a>

				<a href="/modules" class="dashboard-card">
					<div class="card-icon">ðŸ“–</div>
					<h3>Modules</h3>
					<p>Create and manage course modules</p>
					<button class="btn-action">Manage Modules</button>
				</a>

				<a href="/enquiries" class="dashboard-card">
					<div class="card-icon">ðŸ“§</div>
					<h3>Enquiries</h3>
					<p>View and respond to student enquiries</p>
					<button class="btn-action">View Enquiries</button>
				</a>
			</div>
		</main>

		<aside>
			<h3>Quick Actions</h3>
			<ul style="padding-left: 20px;">
				<?php if (\App\Helpers\Auth::isSuperAdmin()): ?>
					<li><a href="/users">Manage Staff</a></li>
				<?php endif; ?>
				<li><a href="/subject-areas">Subject Areas</a></li>
				<li><a href="/modules">Modules</a></li>
				<li><a href="/courses">Courses</a></li>
				<li><a href="/enquiries">Enquiries</a></li>
			</ul>
		</aside>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\course-detail.php
================================================================================
<!doctype html>
<html>
	<head>
		<title><?php echo isset($course) ? htmlspecialchars($course['title']) : 'Course'; ?> - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			main {
				display: flex;
				justify-content: center;
				padding: 40px 20px;
			}
			.container {
				width: 100%;
				max-width: 900px;
			}
			.breadcrumb {
				display: flex;
				gap: 10px;
				margin-bottom: 30px;
				font-size: 14px;
				color: #666;
			}
			.breadcrumb a {
				color: #1976d2;
				text-decoration: none;
			}
			.breadcrumb a:hover {
				text-decoration: underline;
			}
			.breadcrumb .separator {
				color: #ccc;
			}
			.course-header {
				background: white;
				padding: 30px;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0,0,0,0.08);
				margin-bottom: 30px;
				border-left: 6px solid #1976d2;
			}
			.course-header h1 {
				color: #333;
				margin: 0 0 20px 0;
				font-size: 32px;
				font-weight: 700;
			}
			.course-meta {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
				gap: 20px;
				margin-bottom: 20px;
			}
			.meta-item {
				display: flex;
				flex-direction: column;
				gap: 5px;
			}
			.meta-label {
				color: #999;
				font-size: 13px;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}
			.meta-value {
				color: #333;
				font-size: 18px;
				font-weight: 700;
			}
			.meta-value.tag {
				display: inline-flex;
				align-items: center;
				background: #f0f0f0;
				padding: 6px 12px;
				border-radius: 4px;
				font-size: 14px;
				width: fit-content;
			}
			.subject-area-link {
				color: #1976d2;
				text-decoration: none;
				font-weight: 700;
			}
			.subject-area-link:hover {
				text-decoration: underline;
			}
			.description-section {
				background: white;
				padding: 30px;
				border-radius: 8px;
				box-shadow: 0 2px 8px rgba(0,0,0,0.08);
				margin-bottom: 30px;
			}
			.description-section h2 {
				color: #333;
				margin: 0 0 15px 0;
				font-size: 20px;
				font-weight: 700;
			}
			.description-section p {
				color: #666;
				line-height: 1.6;
				margin: 0;
				white-space: pre-wrap;
				word-wrap: break-word;
			}
			.modules-section {
				background: white;
				padding: 30px;
				border-radius: 8px;
				box-shadow: 0 2px 8px rgba(0,0,0,0.08);
				margin-bottom: 30px;
			}
			.modules-section h2 {
				color: #333;
				margin: 0 0 20px 0;
				font-size: 20px;
				font-weight: 700;
			}
			.modules-table {
				width: 100%;
				border-collapse: collapse;
				font-size: 14px;
			}
			.modules-table th {
				background: #f5f5f5;
				padding: 12px;
				text-align: left;
				color: #333;
				font-weight: 700;
				border-bottom: 2px solid #ddd;
			}
			.modules-table td {
				padding: 12px;
				border-bottom: 1px solid #eee;
				color: #666;
			}
			.modules-table tbody tr:hover {
				background: #f9f9f9;
			}
			.module-code {
				color: #333;
				font-weight: 700;
				font-family: monospace;
				background: #f0f0f0;
				padding: 2px 6px;
				border-radius: 3px;
				display: inline-block;
			}
			.empty-modules {
				text-align: center;
				padding: 40px;
				color: #999;
			}
			.back-button {
				display: inline-block;
				margin-bottom: 20px;
				padding: 12px 24px;
				background: #1976d2;
				color: white;
				text-decoration: none;
				border-radius: 4px;
				font-weight: 700;
				transition: background 0.3s;
			}
			.back-button:hover {
				background: #1565c0;
			}
			.error-message {
				background: #f8d7da;
				color: #721c24;
				padding: 20px;
				border-radius: 8px;
				text-align: center;
				border: 1px solid #f5c6cb;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<div class="container">
				<?php if (isset($course) && $course): ?>
					<!-- Breadcrumb Navigation -->
					<div class="breadcrumb">
						<a href="/">Home</a>
						<span class="separator">/</span>
						<?php if (isset($subjectArea) && $subjectArea): ?>
							<a href="/subject-area/<?php echo $subjectArea['id']; ?>"><?php echo htmlspecialchars($subjectArea['name']); ?></a>
							<span class="separator">/</span>
						<?php endif; ?>
						<span><?php echo htmlspecialchars($course['title']); ?></span>
					</div>

					<!-- Course Header -->
					<div class="course-header">
						<h1><?php echo htmlspecialchars($course['title']); ?></h1>
						
						<div class="course-meta">
							<div class="meta-item">
								<span class="meta-label">Subject Area</span>
								<?php if (isset($subjectArea) && $subjectArea): ?>
									<a href="/subject-area/<?php echo $subjectArea['id']; ?>" class="subject-area-link">
										<?php echo htmlspecialchars($subjectArea['name']); ?>
									</a>
								<?php endif; ?>
							</div>
							<div class="meta-item">
								<span class="meta-label">Course Type</span>
								<span class="meta-value"><?php echo htmlspecialchars($course['type']); ?></span>
							</div>
							<div class="meta-item">
								<span class="meta-label">Duration</span>
								<span class="meta-value"><?php echo $course['duration_years']; ?> year<?php echo $course['duration_years'] > 1 ? 's' : ''; ?></span>
							</div>
							<div class="meta-item">
								<span class="meta-label">Can be completed part time?</span>
								<span class="meta-value"><?php echo $course['part_time_available'] ? 'Yes' : 'No'; ?></span>
							</div>
							<?php if ($course['part_time_available']): ?>
								<div class="meta-item">
									<span class="meta-label">Availability</span>
									<span class="meta-value tag">âœ“ Part-time Available</span>
								</div>
							<?php endif; ?>
						</div>
					</div>

					<!-- Course Description -->
					<div class="description-section">
						<h2>About This Course</h2>
						<p><?php echo htmlspecialchars($course['description']); ?></p>
					</div>

					<!-- Modules Section -->
					<div class="modules-section">
						<h2>Course Modules</h2>
						<?php if (isset($modules) && is_array($modules) && count($modules) > 0): ?>
							<table class="modules-table">
								<thead>
									<tr>
										<th style="width: 15%;">Code</th>
										<th style="width: 35%;">Title</th>
										<th style="width: 50%;">Description</th>
									</tr>
								</thead>
								<tbody>
									<?php foreach ($modules as $module): ?>
										<tr>
											<td><span class="module-code"><?php echo htmlspecialchars($module['code']); ?></span></td>
											<td><?php echo htmlspecialchars($module['title']); ?></td>
											<td><?php echo htmlspecialchars($module['description']); ?></td>
										</tr>
									<?php endforeach; ?>
								</tbody>
							</table>
						<?php else: ?>
							<div class="empty-modules">
								<p>No modules assigned to this course yet.</p>
							</div>
						<?php endif; ?>
					</div>

					<a href="<?php echo isset($subjectArea) ? '/subject-area/' . $subjectArea['id'] : '/'; ?>" class="back-button">
						â† <?php echo isset($subjectArea) ? 'Back to ' . htmlspecialchars($subjectArea['name']) : 'Back to Home'; ?>
					</a>

				<?php else: ?>
					<div class="error-message">
						<h2>Course Not Found</h2>
						<p>The course you're looking for doesn't exist or has been removed.</p>
						<a href="/" class="back-button" style="margin-top: 20px;">â† Return to Home</a>
					</div>
				<?php endif; ?>
			</div>
		</main>

		<aside>
            <p>Explore detailed information about our courses, including their modules, duration, and study options.</p>
		</aside>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\course-search.php
================================================================================
<!doctype html>
<html>
	<head>
		<title>Search Courses - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			main {
				display: flex;
				justify-content: center;
				padding: 40px 20px;
			}
			.container {
				width: 100%;
				max-width: 900px;
			}
			.search-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 30px;
			}
			.search-header h1 {
				margin: 0;
				color: #333;
				font-size: 32px;
				font-weight: 700;
			}
			.search-form-section {
				background: white;
				padding: 30px;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0,0,0,0.08);
				margin-bottom: 30px;
			}
			.search-form-section h2 {
				color: #333;
				margin: 0 0 25px 0;
				font-size: 20px;
				font-weight: 700;
			}
			.form-grid {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 20px;
				margin-bottom: 20px;
			}
			.form-grid-full {
				grid-column: 1 / -1;
			}
			.form-group {
				display: flex;
				flex-direction: column;
			}
			.form-group label {
				color: #333;
				font-weight: 600;
				margin-bottom: 8px;
				font-size: 14px;
			}
			.form-group select,
			.form-group input {
				padding: 10px 12px;
				border: 1px solid #ddd;
				border-radius: 4px;
				font-size: 14px;
				font-family: inherit;
				transition: border-color 0.3s;
			}
			.form-group select:focus,
			.form-group input:focus {
				outline: none;
				border-color: #1976d2;
				box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1);
			}
			.duration-inputs {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 15px;
			}
			.duration-inputs .form-group {
				margin-bottom: 0;
			}
			.search-buttons {
				display: flex;
				gap: 12px;
				justify-content: flex-end;
			}
			.btn {
				display: inline-block;
				padding: 12px 24px;
				background: #1976d2;
				color: white;
				text-decoration: none;
				border: none;
				border-radius: 4px;
				font-weight: 700;
				transition: background 0.3s;
				cursor: pointer;
				font-size: 14px;
			}
			.btn:hover {
				background: #1565c0;
			}
			.btn-secondary {
				background: #757575;
			}
			.btn-secondary:hover {
				background: #616161;
			}
			.courses-section {
				background: white;
				padding: 30px;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0,0,0,0.08);
			}
			.courses-section h2 {
				color: #333;
				margin: 0 0 25px 0;
				font-size: 20px;
				font-weight: 700;
			}
			.course-item {
				padding: 20px;
				border: 1px solid #eee;
				border-radius: 4px;
				margin-bottom: 15px;
				background: #fafafa;
				transition: all 0.3s;
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				gap: 20px;
			}
			.course-item:hover {
				background: white;
				border-color: #1976d2;
				box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			}
			.course-content {
				flex: 1;
			}
			.course-item h3 {
				margin: 0 0 8px 0;
				color: #333;
				font-size: 18px;
				font-weight: 700;
			}
			.course-meta {
				display: flex;
				gap: 12px;
				margin-bottom: 10px;
				font-size: 12px;
				color: #999;
				flex-wrap: wrap;
			}
			.course-meta span {
				background: #e8f4f8;
				padding: 3px 8px;
				border-radius: 3px;
				color: #0288d1;
			}
			.course-item p {
				margin: 0;
				color: #666;
				font-size: 14px;
				line-height: 1.6;
			}
			.course-link {
				display: inline-block;
				margin-top: 12px;
				padding: 8px 16px;
				background: #1976d2;
				color: white;
				text-decoration: none;
				border-radius: 4px;
				font-size: 13px;
				font-weight: 700;
				transition: background 0.3s;
				white-space: nowrap;
			}
			.course-link:hover {
				background: #1565c0;
			}
			.empty-state {
				text-align: center;
				padding: 40px;
				color: #999;
			}
			.empty-state p {
				font-size: 16px;
				margin: 0;
			}
			.search-info {
				background: #e3f2fd;
				border-left: 4px solid #1976d2;
				padding: 12px 16px;
				margin-bottom: 20px;
				border-radius: 2px;
				color: #0d47a1;
				font-size: 14px;
			}
			.search-hint {
				color: #999;
				font-size: 12px;
				margin-top: 8px;
				font-style: italic;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<div class="container">
				<div class="search-header">
					<h1>Search Courses</h1>
					<a href="/" class="btn">Back Home</a>
				</div>

				<div class="search-form-section">
					<h2>Filter by your preferences</h2>
					
					<form method="POST" action="/course-search">
						<div class="form-grid">
							<!-- Subject Area Filter -->
							<div class="form-group">
								<label for="subject_area_id">Subject Area</label>
								<select id="subject_area_id" name="subject_area_id">
									<option value="">-- All Subject Areas --</option>
									<?php foreach ($subjectAreas as $area): ?>
										<option value="<?php echo $area['id']; ?>" 
											<?php echo isset($_POST['subject_area_id']) && $_POST['subject_area_id'] == $area['id'] ? 'selected' : ''; ?>>
											<?php echo htmlspecialchars($area['name']); ?>
										</option>
									<?php endforeach; ?>
								</select>
							</div>

							<!-- Course Type Filter -->
							<div class="form-group">
								<label for="type">Course Type</label>
								<select id="type" name="type">
									<option value="">-- All Types --</option>
									<?php foreach ($courseTypes as $courseType): ?>
										<option value="<?php echo htmlspecialchars($courseType); ?>"
											<?php echo isset($_POST['type']) && $_POST['type'] == $courseType ? 'selected' : ''; ?>>
											<?php echo htmlspecialchars($courseType); ?>
										</option>
									<?php endforeach; ?>
								</select>
							</div>

							<!-- Duration Filter -->
							<div class="form-group form-grid-full">
								<label>Duration (years)</label>
								<div class="duration-inputs">
									<div class="form-group">
										<label for="min_duration">Minimum</label>
										<input type="number" id="min_duration" name="min_duration" min="1" max="10" placeholder="e.g. 2"
											<?php echo isset($_POST['min_duration']) && $_POST['min_duration'] !== '' ? 'value="' . htmlspecialchars($_POST['min_duration']) . '"' : ''; ?> />
									</div>
									<div class="form-group">
										<label for="max_duration">Maximum</label>
										<input type="number" id="max_duration" name="max_duration" min="1" max="10" placeholder="e.g. 4"
											<?php echo isset($_POST['max_duration']) && $_POST['max_duration'] !== '' ? 'value="' . htmlspecialchars($_POST['max_duration']) . '"' : ''; ?> />
									</div>
								</div>
								<p class="search-hint">Leave blank to include all durations. Min must be â‰¤ Max if both specified.</p>
							</div>

							<!-- Part-time Filter -->
							<div class="form-group form-grid-full">
								<label style="display: flex; align-items: center; gap: 8px; text-transform: none; margin: 0; font-weight: 500; color: #333;">
									<input type="checkbox" id="part_time_only" name="part_time_only" 
										<?php echo isset($_POST['part_time_only']) && $_POST['part_time_only'] === 'on' ? 'checked' : ''; ?> 
										style="width: auto; padding: 0; margin: 0; cursor: pointer;" />
									<span>Part-time available only</span>
								</label>
								<p class="search-hint">Check to see only courses that can be completed part-time.</p>
							</div>
						</div>

						<div class="search-buttons">
							<button type="reset" class="btn btn-secondary">Clear</button>
							<button type="submit" class="btn">Search Courses</button>
						</div>
					</form>
				</div>

				<!-- Search Results Section -->
				<?php if ($searchPerformed): ?>
					<div class="courses-section">
						<?php if (is_array($searchResults) && count($searchResults) > 0): ?>
							<div class="search-info">
								Found <strong><?php echo count($searchResults); ?></strong> course<?php echo count($searchResults) > 1 ? 's' : ''; ?> on this page matching your criteria.
							</div>
							<h2>Search Results</h2>
							
							<?php foreach ($searchResults as $course): ?>
								<div class="course-item">
									<div class="course-content">
										<h3><?php echo htmlspecialchars($course['title']); ?></h3>
										<div class="course-meta">
											<span><?php echo htmlspecialchars($course['type']); ?></span>
											<span><?php echo $course['duration_years']; ?> year<?php echo $course['duration_years'] > 1 ? 's' : ''; ?></span>
											<?php if ($course['part_time_available']): ?>
												<span>Part-time available</span>
											<?php endif; ?>
										</div>
										<p><?php echo htmlspecialchars(substr($course['description'], 0, 150)); ?><?php echo strlen($course['description']) > 150 ? '...' : ''; ?></p>
										<a href="/course/<?php echo $course['id']; ?>" class="course-link">View Course â†’</a>
									</div>
								</div>
							<?php endforeach; ?>

							<!-- Pagination for Search Results -->
							<?php if (isset($totalPages) && $totalPages > 1): ?>
								<div style="display: flex; justify-content: center; gap: 8px; margin-top: 30px; flex-wrap: wrap;">
									<!-- Previous Button -->
									<?php if ($currentPage > 1): ?>
										<form method="POST" style="display: inline; margin: 0; padding: 0;">
											<input type="hidden" name="subject_area_id" value="<?php echo isset($_POST['subject_area_id']) ? htmlspecialchars($_POST['subject_area_id']) : ''; ?>" />
											<input type="hidden" name="type" value="<?php echo isset($_POST['type']) ? htmlspecialchars($_POST['type']) : ''; ?>" />
											<input type="hidden" name="min_duration" value="<?php echo isset($_POST['min_duration']) ? htmlspecialchars($_POST['min_duration']) : ''; ?>" />
											<input type="hidden" name="max_duration" value="<?php echo isset($_POST['max_duration']) ? htmlspecialchars($_POST['max_duration']) : ''; ?>" />
											<?php if (isset($_POST['part_time_only']) && $_POST['part_time_only'] === 'on'): ?>
												<input type="hidden" name="part_time_only" value="on" />
											<?php endif; ?>
											<button type="submit" formaction="?page=<?php echo $currentPage - 1; ?>" style="padding: 8px 12px; background: #1976d2; color: white; border: none; border-radius: 4px; font-weight: 600; cursor: pointer; transition: background 0.3s;" onmouseover="this.style.background='#1565c0'" onmouseout="this.style.background='#1976d2'">â† Previous</button>
										</form>
									<?php endif; ?>

									<!-- Page Numbers -->
									<?php
										$startPage = max(1, $currentPage - 2);
										$endPage = min($totalPages, $currentPage + 2);

										if ($startPage > 1) {
											echo '<form method="POST" style="display: inline; margin: 0; padding: 0;"><input type="hidden" name="subject_area_id" value="' . (isset($_POST['subject_area_id']) ? htmlspecialchars($_POST['subject_area_id']) : '') . '" /><input type="hidden" name="type" value="' . (isset($_POST['type']) ? htmlspecialchars($_POST['type']) : '') . '" /><input type="hidden" name="min_duration" value="' . (isset($_POST['min_duration']) ? htmlspecialchars($_POST['min_duration']) : '') . '" /><input type="hidden" name="max_duration" value="' . (isset($_POST['max_duration']) ? htmlspecialchars($_POST['max_duration']) : '') . '" />' . (isset($_POST['part_time_only']) && $_POST['part_time_only'] === 'on' ? '<input type="hidden" name="part_time_only" value="on" />' : '') . '<button type="submit" formaction="?page=1" style="padding: 8px 12px; background: #f0f0f0; border: none; border-radius: 4px; font-weight: 600; cursor: pointer;">1</button></form>';
											if ($startPage > 2) {
												echo '<span style="padding: 8px 12px; color: #999;">...</span>';
											}
										}

										for ($i = $startPage; $i <= $endPage; $i++) {
											if ($i == $currentPage) {
												echo '<span style="padding: 8px 12px; background: #1976d2; color: white; border-radius: 4px; font-weight: 600;">' . $i . '</span>';
											} else {
												echo '<form method="POST" style="display: inline; margin: 0; padding: 0;"><input type="hidden" name="subject_area_id" value="' . (isset($_POST['subject_area_id']) ? htmlspecialchars($_POST['subject_area_id']) : '') . '" /><input type="hidden" name="type" value="' . (isset($_POST['type']) ? htmlspecialchars($_POST['type']) : '') . '" /><input type="hidden" name="min_duration" value="' . (isset($_POST['min_duration']) ? htmlspecialchars($_POST['min_duration']) : '') . '" /><input type="hidden" name="max_duration" value="' . (isset($_POST['max_duration']) ? htmlspecialchars($_POST['max_duration']) : '') . '" />' . (isset($_POST['part_time_only']) && $_POST['part_time_only'] === 'on' ? '<input type="hidden" name="part_time_only" value="on" />' : '') . '<button type="submit" formaction="?page=' . $i . '" style="padding: 8px 12px; background: #f0f0f0; border: none; border-radius: 4px; font-weight: 600; cursor: pointer; transition: background 0.3s;" onmouseover="this.style.background=\'#e0e0e0\'" onmouseout="this.style.background=\'#f0f0f0\'">' . $i . '</button></form>';
											}
										}

										if ($endPage < $totalPages) {
											if ($endPage < $totalPages - 1) {
												echo '<span style="padding: 8px 12px; color: #999;">...</span>';
											}
											echo '<form method="POST" style="display: inline; margin: 0; padding: 0;"><input type="hidden" name="subject_area_id" value="' . (isset($_POST['subject_area_id']) ? htmlspecialchars($_POST['subject_area_id']) : '') . '" /><input type="hidden" name="type" value="' . (isset($_POST['type']) ? htmlspecialchars($_POST['type']) : '') . '" /><input type="hidden" name="min_duration" value="' . (isset($_POST['min_duration']) ? htmlspecialchars($_POST['min_duration']) : '') . '" /><input type="hidden" name="max_duration" value="' . (isset($_POST['max_duration']) ? htmlspecialchars($_POST['max_duration']) : '') . '" />' . (isset($_POST['part_time_only']) && $_POST['part_time_only'] === 'on' ? '<input type="hidden" name="part_time_only" value="on" />' : '') . '<button type="submit" formaction="?page=' . $totalPages . '" style="padding: 8px 12px; background: #f0f0f0; border: none; border-radius: 4px; font-weight: 600; cursor: pointer;">' . $totalPages . '</button></form>';
										}
									?>

									<!-- Next Button -->
									<?php if ($currentPage < $totalPages): ?>
										<form method="POST" style="display: inline; margin: 0; padding: 0;">
											<input type="hidden" name="subject_area_id" value="<?php echo isset($_POST['subject_area_id']) ? htmlspecialchars($_POST['subject_area_id']) : ''; ?>" />
											<input type="hidden" name="type" value="<?php echo isset($_POST['type']) ? htmlspecialchars($_POST['type']) : ''; ?>" />
											<input type="hidden" name="min_duration" value="<?php echo isset($_POST['min_duration']) ? htmlspecialchars($_POST['min_duration']) : ''; ?>" />
											<input type="hidden" name="max_duration" value="<?php echo isset($_POST['max_duration']) ? htmlspecialchars($_POST['max_duration']) : ''; ?>" />
											<?php if (isset($_POST['part_time_only']) && $_POST['part_time_only'] === 'on'): ?>
												<input type="hidden" name="part_time_only" value="on" />
											<?php endif; ?>
											<button type="submit" formaction="?page=<?php echo $currentPage + 1; ?>" style="padding: 8px 12px; background: #1976d2; color: white; border: none; border-radius: 4px; font-weight: 600; cursor: pointer; transition: background 0.3s;" onmouseover="this.style.background='#1565c0'" onmouseout="this.style.background='#1976d2'">Next â†’</button>
										</form>
									<?php endif; ?>
								</div>
							<?php endif; ?>
						<?php else: ?>
							<div class="empty-state">
								<p>No courses found matching your search criteria.</p>
								<p style="font-size: 13px; margin-top: 10px; color: #ccc;">Try adjusting your filters.</p>
							</div>
						<?php endif; ?>
					</div>
				<?php endif; ?>
			</div>
		</main>

		<aside>
            <h3>Course Search</h3>
            <p>Use the search form above to find courses by subject area, type, or duration. You can combine any criteria to narrow down your options.</p>
		</aside>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\courses.php
================================================================================
<!doctype html>
<html>
	<head>
		<title>Courses - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			main {
				display: flex;
				justify-content: center;
				padding: 40px 20px;
				background: #f8f9fa;
				min-height: 100vh;
			}
			.container {
				width: 100%;
				max-width: 600px;
				box-sizing: border-box;
			}
			.header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 50px;
				box-sizing: border-box;
			}
			.header h1 {
				margin: 0;
				color: #1a1a1a;
				font-size: 36px;
				font-weight: 800;
				letter-spacing: -0.5px;
			}
			.form-section {
				background: white;
				padding: 28px;
				border-radius: 12px;
				box-shadow: 0 2px 16px rgba(0,0,0,0.06);
				margin-bottom: 50px;
				border: 1px solid #f0f0f0;
				box-sizing: border-box;
				width: 100%;
			}
			.form-section h2 {
				color: #1a1a1a;
				margin: 0 0 30px 0;
				font-size: 22px;
				font-weight: 700;
				padding-bottom: 15px;
				border-bottom: 2px solid #f0f0f0;
				box-sizing: border-box;
			}
			.form-row {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 15px;
				margin-bottom: 25px;
				box-sizing: border-box;
			}
			.form-row.full {
				grid-template-columns: 1fr;
			}
			.form-group {
				margin-bottom: 0;
				box-sizing: border-box;
			}
			.form-group label {
				display: block;
				margin-bottom: 12px;
				font-weight: 600;
				color: #666;
				font-size: 14px;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}
			.form-group input,
			.form-group select,
			.form-group textarea {
				width: 100%;
				box-sizing: border-box;
				padding: 14px 16px;
				border: 1.5px solid #e0e0e0;
				border-radius: 8px;
				font-size: 15px;
				box-sizing: border-box;
				transition: all 0.3s ease;
				font-family: inherit;
				background: #fafbfc;
			}
			.form-group input:hover,
			.form-group select:hover,
			.form-group textarea:hover {
				border-color: #d0d0d0;
				background: #fff;
			}
			.form-group input:focus,
			.form-group select:focus,
			.form-group textarea:focus {
				outline: none;
				border-color: #1976d2;
				background: #fff;
				box-shadow: 0 0 0 4px rgba(25, 118, 210, 0.08);
			}
			.form-group textarea {
				resize: vertical;
				min-height: 120px;
			}
			.checkbox-group {
				display: flex;
				align-items: center;
				gap: 12px;
				margin-top: 10px;
				padding: 10px 12px;
				background: #fafbfc;
				border: 1.5px solid #e0e0e0;
				border-radius: 8px;
				transition: all 0.3s ease;
				box-sizing: border-box;
			}
			.checkbox-group:hover {
				border-color: #d0d0d0;
				background: #fff;
			}
			.checkbox-group input[type="checkbox"] {
				width: auto;
				margin: 0;
				padding: 0;
				cursor: pointer;
				accent-color: #1976d2;
			}
			.checkbox-group label {
				margin: 0;
				font-weight: 500;
				cursor: pointer;
				color: #333;
			}
			.modules-section {
				background: white;
				padding: 40px;
				border-radius: 12px;
				margin-top: 30px;
				border: 1px solid #f0f0f0;
				box-shadow: 0 2px 16px rgba(0,0,0,0.06);
				box-sizing: border-box;
			}
			.modules-section h3 {
				color: #1a1a1a;
				margin: 0 0 30px 0;
				font-size: 17px;
				font-weight: 700;
				text-transform: uppercase;
				letter-spacing: 0.5px;
				padding-bottom: 15px;
				border-bottom: 2px solid #f0f0f0;
			}
			.modules-list {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
				gap: 16px;
				box-sizing: border-box;
			}
			.module-item {
				background: #fafbfc;
				padding: 18px;
				border: 1.5px solid #e8e8e8;
				border-radius: 10px;
				cursor: pointer;
				transition: all 0.3s ease;
				box-shadow: 0 2px 8px rgba(0,0,0,0.04);
			}
			.module-item:hover {
				border-color: #1976d2;
				background: white;
				box-shadow: 0 4px 14px rgba(25, 118, 210, 0.18);
				transform: translateY(-2px);
			}
			.module-item.selected {
				border-color: #1976d2;
				background: linear-gradient(135deg, #e3f2fd 0%, #fff 100%);
				box-shadow: 0 4px 14px rgba(25, 118, 210, 0.25);
			}
			.module-item input[type="checkbox"] {
				margin-right: 10px;
				cursor: pointer;
				accent-color: #1976d2;
			}
			.module-code {
				font-weight: 700;
				color: #1976d2;
				display: block;
				margin-bottom: 6px;
				font-family: 'Courier New', monospace;
				letter-spacing: 0.5px;
			}
			.module-title {
				font-size: 13px;
				color: #666;
				line-height: 1.4;
			}
			.form-actions {
				display: flex;
				gap: 12px;
				margin-top: 40px;
				padding-top: 30px;
				border-top: 2px solid #f0f0f0;
			}
			.btn {
				padding: 12px 28px;
				border: none;
				border-radius: 8px;
				cursor: pointer;
				font-size: 15px;
				font-weight: 700;
				transition: all 0.3s ease;
				text-decoration: none;
				display: inline-block;
				letter-spacing: 0.3px;
			}
			.btn-primary {
				background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
				color: white;
				box-shadow: 0 4px 12px rgba(25, 118, 210, 0.3);
			}
			.btn-primary:hover {
				transform: translateY(-2px);
				box-shadow: 0 6px 16px rgba(25, 118, 210, 0.4);
			}
			.btn-secondary {
				background: #f0f0f0;
				color: #333;
				border: 1.5px solid #e0e0e0;
			}
			.btn-secondary:hover {
				background: #e8e8e8;
				border-color: #d0d0d0;
			}
			.btn-danger {
				background: #ef5350;
				color: white;
				box-shadow: 0 4px 12px rgba(239, 83, 80, 0.2);
			}
			.btn-danger:hover {
				background: #e53935;
				transform: translateY(-2px);
				box-shadow: 0 6px 16px rgba(239, 83, 80, 0.3);
			}
			.btn-small {
				padding: 8px 14px;
				font-size: 13px;
			}
			.alert {
				padding: 18px 24px;
				margin-bottom: 30px;
				border-radius: 10px;
				font-size: 14px;
				border-left: 4px solid;
			}
			.alert-danger {
				background: #ffebee;
				color: #c62828;
				border-left-color: #d32f2f;
			}
			.alert-success {
				background: #e8f5e9;
				color: #2e7d32;
				border-left-color: #4caf50;
			}
			.courses-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
				gap: 25px;
				margin-top: 30px;
			}
			.course-card {
				background: white;
				border: 1px solid #f0f0f0;
				border-radius: 12px;
				padding: 25px;
				box-shadow: 0 2px 16px rgba(0,0,0,0.06);
				transition: all 0.3s ease;
				overflow: hidden;
			}
			.course-card:hover {
				box-shadow: 0 8px 24px rgba(0,0,0,0.12);
				border-color: #1976d2;
				transform: translateY(-4px);
			}
			.course-card h3 {
				margin: 0 0 15px 0;
				color: #1a1a1a;
				font-size: 18px;
				font-weight: 700;
			}
			.course-meta {
				display: flex;
				gap: 10px;
				margin-bottom: 18px;
				font-size: 12px;
				color: #666;
				flex-wrap: wrap;
			}
			.course-meta span {
				background: linear-gradient(135deg, #e3f2fd 0%, #f3f5f9 100%);
				padding: 6px 12px;
				border-radius: 6px;
				color: #0288d1;
				font-weight: 500;
			}
			.course-description {
				font-size: 13px;
				color: #666;
				line-height: 1.5;
				margin-bottom: 15px;
				display: -webkit-box;
				-webkit-line-clamp: 2;
				-webkit-box-orient: vertical;
				overflow: hidden;
			}
			.course-actions {
				display: flex;
				gap: 8px;
			}
			.empty-state {
				text-align: center;
				padding: 60px 20px;
				color: #999;
				background: white;
				border-radius: 8px;
				box-shadow: 0 2px 8px rgba(0,0,0,0.08);
			}
			.empty-state p {
				margin: 0;
				font-size: 16px;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<div class="container">
				<div class="header">
					<h1>Courses Management</h1>
					<a href="/admin" class="btn btn-secondary">Back to Admin</a>
				</div>

				<?php if (isset($_GET['message'])): ?>
					<div class="alert alert-success"><?php echo htmlspecialchars($_GET['message']); ?></div>
				<?php endif; ?>

				<?php if (isset($error) && !empty($error)): ?>
					<div class="alert alert-danger"><?php echo htmlspecialchars($error); ?></div>
				<?php endif; ?>

				<div class="form-section">
					<h2><?php echo (isset($editCourse) && $editCourse) ? 'Edit Course' : 'Add New Course'; ?></h2>
					
					<form method="POST" action="/courses/save">
						<?php if (isset($editCourse) && $editCourse): ?>
							<input type="hidden" name="id" value="<?php echo $editCourse['id']; ?>" />
						<?php endif; ?>

						<!-- Course Title -->
						<div class="form-row full">
							<div class="form-group">
								<label for="title">Course Title *</label>
								<input 
									type="text" 
									id="title" 
									name="title" 
									required 
									maxlength="255"
									value="<?php echo (isset($editCourse) && $editCourse) ? htmlspecialchars($editCourse['title']) : ''; ?>"
									placeholder="e.g., Software Engineering, Data Science"
									autofocus
								/>
							</div>
						</div>

						<!-- Subject Area & Type -->
						<div class="form-row">
							<div class="form-group">
								<label for="subject_area_id">Subject Area *</label>
								<select id="subject_area_id" name="subject_area_id" required>
									<option value="">Select a subject area...</option>
									<?php foreach ($subjectAreas as $area): ?>
										<option value="<?php echo $area['id']; ?>" <?php echo (isset($editCourse) && $editCourse && $editCourse['subject_area_id'] == $area['id']) ? 'selected' : ''; ?>>
											<?php echo htmlspecialchars($area['name']); ?>
										</option>
									<?php endforeach; ?>
								</select>
							</div>
							<div class="form-group">
								<label for="type">Course Type *</label>
								<select id="type" name="type" required>
									<option value="">Select type...</option>
									<option value="BSc" <?php echo (isset($editCourse) && $editCourse && $editCourse['type'] == 'BSc') ? 'selected' : ''; ?>>BSc (Bachelor of Science)</option>
									<option value="BA" <?php echo (isset($editCourse) && $editCourse && $editCourse['type'] == 'BA') ? 'selected' : ''; ?>>BA (Bachelor of Arts)</option>
									<option value="MSc" <?php echo (isset($editCourse) && $editCourse && $editCourse['type'] == 'MSc') ? 'selected' : ''; ?>>MSc (Master of Science)</option>
									<option value="MA" <?php echo (isset($editCourse) && $editCourse && $editCourse['type'] == 'MA') ? 'selected' : ''; ?>>MA (Master of Arts)</option>
									<option value="PhD" <?php echo (isset($editCourse) && $editCourse && $editCourse['type'] == 'PhD') ? 'selected' : ''; ?>>PhD</option>
									<option value="Diploma" <?php echo (isset($editCourse) && $editCourse && $editCourse['type'] == 'Diploma') ? 'selected' : ''; ?>>Diploma</option>
									<option value="Certificate" <?php echo (isset($editCourse) && $editCourse && $editCourse['type'] == 'Certificate') ? 'selected' : ''; ?>>Certificate</option>
								</select>
							</div>
						</div>

						<!-- Duration -->
						<div class="form-row">
							<div class="form-group">
								<label for="duration_years">Duration (Years) *</label>
								<select id="duration_years" name="duration_years" required>
									<option value="">Select duration...</option>
									<?php for ($i = 1; $i <= 10; $i++): ?>
										<option value="<?php echo $i; ?>" <?php echo (isset($editCourse) && $editCourse && $editCourse['duration_years'] == $i) ? 'selected' : ''; ?>>
											<?php echo $i; ?> year<?php echo $i > 1 ? 's' : ''; ?>
										</option>
									<?php endfor; ?>
								</select>
							</div>
							<div class="form-group">
								<label>Options</label>
								<div class="checkbox-group">
									<input 
										type="checkbox" 
										id="part_time" 
										name="part_time_available" 
										value="1"
										<?php echo (isset($editCourse) && $editCourse && $editCourse['part_time_available']) ? 'checked' : ''; ?>
									/>
									<label for="part_time">Part-time available</label>
								</div>
							</div>
						</div>

						<!-- Description -->
						<div class="form-row full">
							<div class="form-group">
								<label for="description">Course Description *</label>
								<textarea 
									id="description" 
									name="description" 
									required 
									placeholder="Detailed description of the course..."
								><?php echo (isset($editCourse) && $editCourse) ? htmlspecialchars($editCourse['description']) : ''; ?></textarea>
							</div>
						</div>

						<!-- Modules Selection -->
						<?php if (isset($allModules) && is_array($allModules) && count($allModules) > 0): ?>
							<div class="modules-section">
								<h3>Assign Modules to this Course</h3>
								<div class="modules-list">
									<?php foreach ($allModules as $module): ?>
										<?php 
											$isSelected = false;
											if (isset($editModules) && is_array($editModules)) {
												foreach ($editModules as $editMod) {
													if ($editMod['id'] == $module['id']) {
														$isSelected = true;
														break;
													}
												}
											}
										?>
										<div class="module-item <?php echo $isSelected ? 'selected' : ''; ?>" onclick="this.querySelector('input').checked = !this.querySelector('input').checked; this.classList.toggle('selected');">
											<input 
												type="checkbox" 
												name="module_ids[]" 
												value="<?php echo $module['id']; ?>"
												<?php echo $isSelected ? 'checked' : ''; ?>
											/>
											<span class="module-code"><?php echo htmlspecialchars($module['code']); ?></span>
											<span class="module-title"><?php echo htmlspecialchars($module['title']); ?></span>
										</div>
									<?php endforeach; ?>
								</div>
							</div>
						<?php endif; ?>

						<div class="form-actions">
							<button type="submit" class="btn btn-primary">
								<?php echo (isset($editCourse) && $editCourse) ? 'Update Course' : 'Create Course'; ?>
							</button>
							<?php if (isset($editCourse) && $editCourse): ?>
								<a href="/courses" class="btn btn-secondary">Cancel</a>
							<?php endif; ?>
						</div>
					</form>
				</div>

				<h2 style="color: #333; margin: 40px 0 20px 0; font-size: 24px; font-weight: 700;">All Courses</h2>

				<?php if (is_array($courses) && count($courses) > 0): ?>
					<div class="courses-grid">
						<?php foreach ($courses as $course): 
							$subjectArea = null;
							foreach ($subjectAreas as $area) {
								if ($area['id'] == $course['subject_area_id']) {
									$subjectArea = $area;
									break;
								}
							}
						?>
							<div class="course-card">
								<h3><?php echo htmlspecialchars($course['title']); ?></h3>
								<div class="course-meta">
									<span><?php echo htmlspecialchars($course['type']); ?></span>
									<span><?php echo $course['duration_years']; ?> year<?php echo $course['duration_years'] > 1 ? 's' : ''; ?></span>
									<?php if ($subjectArea): ?>
										<span><?php echo htmlspecialchars($subjectArea['name']); ?></span>
									<?php endif; ?>
									<?php if ($course['part_time_available']): ?>
										<span>Part-time</span>
									<?php endif; ?>
								</div>
								<p class="course-description"><?php echo htmlspecialchars(substr($course['description'], 0, 100)); ?>...</p>
								<div class="course-actions">
									<a href="/courses?edit=<?php echo $course['id']; ?>" class="btn btn-small btn-primary">Edit</a>
									<a href="/courses/delete/<?php echo $course['id']; ?>" class="btn btn-small btn-danger" onclick="return confirm('Are you sure you want to delete this course?');">Delete</a>
									<a href="/course/<?php echo $course['id']; ?>" class="btn btn-small btn-secondary">View</a>
								</div>
							</div>
						<?php endforeach; ?>
					</div>
				<?php else: ?>
					<div class="empty-state">
						<p>No courses yet. Create one using the form above to get started!</p>
					</div>
				<?php endif; ?>
			</div>
		</main>

		<aside>
            <p>Manage all courses offered at the university. Each course is assigned to a subject area and can include multiple modules.</p>
		</aside>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\create-user.php
================================================================================
<!doctype html>
<html>

<head>
	<title>Add Staff Member - University of Northampton</title>
	<link rel="stylesheet" href="/uon.css?v=2" />
	<style>
		.form-container {
			width: 100%;
			max-width: 100%;
			background: white;
			padding: 25px;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
			box-sizing: border-box;
		}

		.form-container h2 {
			color: #333;
			margin: 0 0 25px 0;
			font-size: 24px;
			font-weight: 700;
		}

		.form-group {
			margin-bottom: 20px;
			width: 100%;
		}

		.form-group label {
			display: block;
			margin-bottom: 8px;
			font-weight: 600;
			color: #333;
			font-size: 14px;
		}

		.form-group input {
			display: block;
			width: 100%;
			max-width: 350px;
			padding: 12px 14px;
			border: 1px solid #ddd;
			border-radius: 4px;
			font-size: 14px;
			box-sizing: border-box;
		}

		.form-group input:focus {
			outline: none;
			border-color: #1976d2;
			box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1);
		}

		.form-actions {
			display: flex;
			gap: 12px;
			margin-top: 25px;
		}

		.btn-submit {
			background: #1976d2;
			color: white;
			padding: 12px 24px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 14px;
			font-weight: 600;
		}

		.btn-submit:hover {
			background: #1565c0;
		}

		.btn-cancel {
			background: #757575;
			color: white;
			padding: 12px 24px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 14px;
			text-decoration: none;
			display: inline-flex;
			align-items: center;
			font-weight: 600;
		}

		.btn-cancel:hover {
			background: #616161;
		}

		.alert {
			padding: 15px;
			margin-bottom: 20px;
			border-radius: 4px;
			font-size: 14px;
		}

		.alert-danger {
			background: #f8d7da;
			color: #721c24;
			border: 1px solid #f5c6cb;
		}

		.password-help {
			font-size: 12px;
			color: #666;
			margin-top: 5px;
		}
	</style>
</head>

<body>
	<header>
		<img src="/logo.jpg" alt="logo" />
		<ul>
			<li><a href="/">Home</a></li>
			<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
			<li><a href="/enquiry">Make an enquiry</a></li>
		</ul>
	</header>

	<section></section>

	<main>
		<div class="form-container">
			<h2>Add New Staff Member</h2>

			<?php if (isset($error) && $error): ?>
				<div class="alert alert-danger"><?php echo htmlspecialchars($error); ?></div>
			<?php endif; ?>

			<form method="POST">
				<div class="form-group">
					<label for="username">Username</label>
					<input type="text" id="username" name="username" required autocomplete="off" />
				</div>

				<div class="form-group">
					<label for="password">Password</label>
					<input type="password" id="password" name="password" required />
					<div class="password-help">Must be at least 6 characters</div>
				</div>

				<div class="form-group">
					<label for="confirm_password">Confirm Password</label>
					<input type="password" id="confirm_password" name="confirm_password" required />
				</div>

				<div class="form-actions">
					<button type="submit" class="btn-submit">Create Account</button>
					<a href="/users" class="btn-cancel">Cancel</a>
				</div>
			</form>
		</div>
	</main>

	<aside>
		<p>Staff members can log in and access the admin dashboard to manage courses and enquiries.</p>
	</aside>

	<footer>
		&copy; 2025 University of Northampton
	</footer>

</body>

</html>



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\delete-user.php
================================================================================
<!doctype html>
<html>
	<head>
		<title>Delete Staff Member - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			.confirm-container {
				max-width: 450px;
				background: white;
				padding: 45px;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0,0,0,0.08);
				text-align: center;
			}
			.confirm-container h2 {
				color: #d32f2f;
				margin: 0 0 20px 0;
				font-size: 24px;
				font-weight: 700;
			}
			.confirm-container p {
				font-size: 16px;
				color: #666;
				margin: 15px 0;
				line-height: 1.6;
			}
			.username-highlight {
				font-weight: 700;
				color: #333;
				font-size: 18px;
			}
			.form-actions {
				display: flex;
				gap: 12px;
				margin-top: 35px;
			}
			.btn-confirm {
				flex: 1;
				padding: 12px;
				background: #d32f2f;
				color: white;
				border: none;
				border-radius: 4px;
				font-size: 16px;
				font-weight: 700;
				cursor: pointer;
				transition: background 0.3s;
			}
			.btn-confirm:hover {
				background: #b71c1c;
			}
			.btn-cancel {
				flex: 1;
				padding: 12px;
				background: #757575;
				color: white;
				border: none;
				border-radius: 4px;
				font-size: 16px;
				font-weight: 700;
				cursor: pointer;
				text-decoration: none;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: background 0.3s;
			}
			.btn-cancel:hover {
				background: #616161;
			}
			.alert {
				padding: 15px;
				margin-bottom: 20px;
				border-radius: 4px;
				font-size: 14px;
			}
			.alert-danger {
				background: #f8d7da;
				color: #721c24;
				border: 1px solid #f5c6cb;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<div class="confirm-container">
				<?php if ($error): ?>
					<div class="alert alert-danger"><?php echo htmlspecialchars($error); ?></div>
					<a href="/users" class="btn-cancel" style="display: inline-block; width: auto;">Back to Staff</a>
				<?php else: ?>
					<h2>Delete Staff Member?</h2>
					<p>Are you sure you want to permanently delete this account?</p>
					<p><span class="username-highlight"><?php echo htmlspecialchars($user['username']); ?></span></p>
					<p style="color: #888; font-size: 14px;">This action cannot be undone.</p>

					<form method="POST" action="/users/delete?id=<?php echo $user['id']; ?>">
						<div class="form-actions">
							<button type="submit" class="btn-confirm">Delete Account</button>
							<a href="/users" class="btn-cancel">Cancel</a>
						</div>
					</form>
				<?php endif; ?>
			</div>
		</main>

		<aside>
			<p>This action is permanent. Deleted accounts cannot be recovered.</p>
		</aside>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\enquiries.php
================================================================================
<!doctype html>
<html>

<head>
	<title>Manage Enquiries - University of Northampton</title>
	<link rel="stylesheet" href="/uon.css?v=2" />
	<style>
		.page-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 25px;
		}

		.page-header h1 {
			margin: 0;
			color: #333;
			font-size: 28px;
			font-weight: 700;
		}

		.filter-section {
			display: flex;
			gap: 10px;
			margin-bottom: 25px;
			flex-wrap: wrap;
		}

		.filter-btn {
			padding: 8px 14px;
			border: 1px solid #ddd;
			border-radius: 4px;
			background: white;
			cursor: pointer;
			font-size: 14px;
			font-weight: 600;
			text-decoration: none;
			display: inline-block;
			color: #333;
		}

		.filter-btn:hover {
			border-color: #1976d2;
			color: #1976d2;
		}

		.filter-btn.active {
			background: #1976d2;
			color: white;
			border-color: #1976d2;
		}

		.alert {
			padding: 12px 14px;
			margin-bottom: 20px;
			border-radius: 4px;
			font-size: 14px;
		}

		.alert-danger {
			background: #f8d7da;
			color: #721c24;
			border: 1px solid #f5c6cb;
		}

		.alert-success {
			background: #d4edda;
			color: #155724;
			border: 1px solid #c3e6cb;
		}

		.enquiries-table {
			width: 100%;
			border-collapse: collapse;
			background: white;
			border-radius: 8px;
			overflow: hidden;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
			font-size: 14px;
		}

		.enquiries-table th {
			background: #f5f5f5;
			padding: 12px 10px;
			text-align: left;
			color: #333;
			font-weight: 700;
			border-bottom: 2px solid #ddd;
		}

		.enquiries-table td {
			padding: 12px 10px;
			border-bottom: 1px solid #eee;
			color: #666;
			vertical-align: top;
		}

		.enquiries-table tbody tr:hover {
			background: #f9f9f9;
		}

		.status-badge {
			display: inline-block;
			padding: 4px 10px;
			border-radius: 12px;
			font-size: 12px;
			font-weight: 600;
		}

		.status-new {
			background: #fff3cd;
			color: #856404;
		}

		.status-responded {
			background: #d4edda;
			color: #155724;
		}

		.enquiry-actions {
			display: flex;
			gap: 6px;
			flex-wrap: wrap;
		}

		.btn {
			padding: 6px 10px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 12px;
			font-weight: 600;
			text-decoration: none;
			display: inline-block;
		}

		.btn-view {
			background: #1976d2;
			color: white;
		}

		.btn-view:hover {
			background: #1565c0;
		}

		.btn-danger {
			background: #d32f2f;
			color: white;
		}

		.btn-danger:hover {
			background: #c62828;
		}

		.btn-secondary {
			background: #757575;
			color: white;
			padding: 8px 16px;
			font-size: 14px;
		}

		.btn-secondary:hover {
			background: #616161;
		}

		.empty-state {
			text-align: center;
			padding: 40px 20px;
			color: #666;
			background: white;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
		}

		.empty-state p {
			margin: 0;
			font-size: 16px;
		}

		.truncate {
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
			max-width: 120px;
		}

		.name-cell {
			font-weight: 600;
			color: #333;
		}

		.email-cell {
			font-size: 12px;
			color: #666;
		}
	</style>
</head>

<body>
	<header>
		<img src="/logo.jpg" alt="logo" />
		<ul>
			<li><a href="/">Home</a></li>
			<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
			<li><a href="/enquiry">Make an enquiry</a></li>
		</ul>
	</header>

	<section></section>

	<main>
		<div class="page-header">
			<h1>Manage Enquiries</h1>
			<a href="/admin" class="btn btn-secondary">Back to Admin</a>
		</div>

		<?php if (isset($_GET['message'])): ?>
			<div class="alert alert-success"><?php echo htmlspecialchars($_GET['message']); ?></div>
		<?php endif; ?>

		<?php if (isset($_GET['error'])): ?>
			<div class="alert alert-danger"><?php echo htmlspecialchars($_GET['error']); ?></div>
		<?php endif; ?>

		<div class="filter-section">
			<a href="/admin/enquiries"
				class="filter-btn <?php echo (!isset($_GET['filter']) || $_GET['filter'] === 'all') ? 'active' : ''; ?>">
				All Enquiries
			</a>
			<a href="/admin/enquiries?filter=pending"
				class="filter-btn <?php echo (isset($_GET['filter']) && $_GET['filter'] === 'pending') ? 'active' : ''; ?>">
				Pending
			</a>
			<a href="/admin/enquiries?filter=responded"
				class="filter-btn <?php echo (isset($_GET['filter']) && $_GET['filter'] === 'responded') ? 'active' : ''; ?>">
				Responded
			</a>
		</div>

		<?php if (is_array($enquiries) && count($enquiries) > 0): ?>
			<table class="enquiries-table">
				<thead>
					<tr>
						<th>Date</th>
						<th>Name / Email</th>
						<th>Course</th>
						<th>Status</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<?php foreach ($enquiries as $enquiry): ?>
						<tr>
							<td>
								<?php echo date('M d, Y', strtotime($enquiry['created_at'])); ?>
							</td>
							<td>
								<div class="name-cell"><?php echo htmlspecialchars($enquiry['name']); ?></div>
								<div class="email-cell"><?php echo htmlspecialchars($enquiry['email']); ?></div>
								<?php if (!empty($enquiry['phone'])): ?>
									<div class="email-cell"><?php echo htmlspecialchars($enquiry['phone']); ?></div>
								<?php endif; ?>
							</td>
							<td class="truncate">
								<?php echo htmlspecialchars($enquiry['course_title'] ?? 'Unknown'); ?>
							</td>
							<td>
								<?php
								$statusClass = 'status-' . strtolower($enquiry['status']);
								?>
								<span class="status-badge <?php echo $statusClass; ?>">
									<?php echo ucfirst($enquiry['status']); ?>
								</span>
							</td>
							<td>
								<div class="enquiry-actions">
									<a href="/admin/enquiries/<?php echo $enquiry['id']; ?>" class="btn btn-view">View</a>
									<?php if ($enquiry['status'] === 'new'): ?>
										<form method="POST" action="/enquiry/respond/<?php echo $enquiry['id']; ?>"
											style="display: inline;">
											<button type="submit" class="btn btn-view"
												onclick="return confirm('Mark this enquiry as responded?');">Respond</button>
										</form>
									<?php endif; ?>
								</div>
							</td>
						</tr>
					<?php endforeach; ?>
				</tbody>
			</table>
		<?php else: ?>
			<div class="empty-state">
				<p>
					<?php
					if (isset($_GET['filter']) && $_GET['filter'] === 'pending') {
						echo 'No pending enquiries.';
					} elseif (isset($_GET['filter']) && $_GET['filter'] === 'responded') {
						echo 'No responded enquiries.';
					} else {
						echo 'No enquiries yet.';
					}
					?>
				</p>
			</div>
		<?php endif; ?>
	</main>

	<aside>
		<p>Manage student enquiries and track response status. All new enquiries are marked as pending and can be marked
			as responded once you have contacted the student.</p>
	</aside>

	<footer>
		&copy; 2025 University of Northampton
	</footer>

</body>

</html>



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\enquiry-detail.php
================================================================================
<!doctype html>
<html>
	<head>
		<title>Enquiry Details - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			* {
				box-sizing: border-box;
			}

			body {
				display: flex;
				flex-direction: column;
				min-height: 100vh;
			}

			main {
				flex: 1;
				display: flex;
				justify-content: center;
				padding: 40px 20px;
				background: #f8f9fa;
			}

			.container {
				width: 100%;
				max-width: 600px;
				box-sizing: border-box;
			}

			.page-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 30px;
			}

			.page-header h1 {
				margin: 0;
				color: #333;
				font-size: 28px;
				font-weight: 700;
			}

			.detail-card {
				background: white;
				padding: 30px;
				border-radius: 12px;
				box-shadow: 0 2px 16px rgba(0,0,0,0.06);
				border: 1px solid #f0f0f0;
				margin-bottom: 20px;
				box-sizing: border-box;
				width: 100%;
			}

			.detail-row {
				margin-bottom: 25px;
				padding-bottom: 25px;
				border-bottom: 1px solid #e0e0e0;
			}

			.detail-row:last-child {
				margin-bottom: 0;
				padding-bottom: 0;
				border-bottom: none;
			}

			.detail-label {
				font-size: 12px;
				font-weight: 700;
				color: #666;
				text-transform: uppercase;
				letter-spacing: 0.5px;
				margin-bottom: 6px;
			}

			.detail-value {
				font-size: 16px;
				color: #333;
				line-height: 1.6;
				word-wrap: break-word;
			}

			.status-badge {
				display: inline-block;
				padding: 6px 16px;
				border-radius: 20px;
				font-size: 13px;
				font-weight: 600;
				white-space: nowrap;
			}

			.status-new {
				background: #fff3cd;
				color: #856404;
			}

			.status-responded {
				background: #d4edda;
				color: #155724;
			}

			.status-closed {
				background: #e2e3e5;
				color: #383d41;
			}

			.message-box {
				background: #f8f9fa;
				padding: 16px;
				border-radius: 8px;
				border-left: 4px solid #1976d2;
				white-space: pre-wrap;
				word-wrap: break-word;
			}

			.action-buttons {
				display: flex;
				gap: 10px;
				margin-top: 30px;
				padding-top: 30px;
				border-top: 1px solid #e0e0e0;
			}

			.btn {
				padding: 10px 20px;
				border: none;
				border-radius: 8px;
				cursor: pointer;
				font-size: 15px;
				font-weight: 600;
				transition: all 0.3s ease;
				text-decoration: none;
				display: inline-block;
			}

			.btn-primary {
				background: #1976d2;
				color: white;
				flex: 1;
			}

			.btn-primary:hover {
				background: #1565c0;
				transform: translateY(-2px);
				box-shadow: 0 4px 12px rgba(25, 118, 210, 0.3);
			}

			.btn-danger {
				background: #d32f2f;
				color: white;
			}

			.btn-danger:hover {
				background: #c62828;
				transform: translateY(-2px);
				box-shadow: 0 4px 12px rgba(211, 47, 47, 0.3);
			}

			.btn-secondary {
				background: #757575;
				color: white;
				text-decoration: none;
			}

			.btn-secondary:hover {
				background: #616161;
				transform: translateY(-2px);
				box-shadow: 0 4px 12px rgba(117, 117, 117, 0.3);
			}

			aside {
				background: #f5f5f5;
				padding: 50px 20px;
				text-align: center;
				border-top: 1px solid #e0e0e0;
				width: 100%;
			}

			aside p {
				max-width: 600px;
				margin: 0 auto;
				color: #555;
				font-size: 16px;
				line-height: 1.7;
				font-weight: 500;
			}

			footer {
				background: #333;
				color: white;
				text-align: center;
				padding: 20px;
				font-size: 14px;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<div class="container">
				<div class="page-header">
					<h1>Enquiry Details</h1>
					<a href="/admin/enquiries" class="btn btn-secondary">Back to List</a>
				</div>

				<div class="detail-card">
					<div class="detail-row">
						<div class="detail-label">Full Name</div>
						<div class="detail-value">
							<?php echo htmlspecialchars($enquiry['name'] ?? 'N/A'); ?>
						</div>
					</div>

					<div class="detail-row">
						<div class="detail-label">Email Address</div>
						<div class="detail-value">
							<a href="mailto:<?php echo htmlspecialchars($enquiry['email'] ?? ''); ?>" style="color: #1976d2; text-decoration: none;">
								<?php echo htmlspecialchars($enquiry['email'] ?? 'N/A'); ?>
							</a>
						</div>
					</div>

					<?php if (!empty($enquiry['phone'])): ?>
						<div class="detail-row">
							<div class="detail-label">Phone Number</div>
							<div class="detail-value">
								<a href="tel:<?php echo htmlspecialchars($enquiry['phone']); ?>" style="color: #1976d2; text-decoration: none;">
									<?php echo htmlspecialchars($enquiry['phone']); ?>
								</a>
							</div>
						</div>
					<?php endif; ?>

					<div class="detail-row">
						<div class="detail-label">Course</div>
						<div class="detail-value">
							<?php echo htmlspecialchars($enquiry['course_title'] ?? 'Unknown'); ?>
						</div>
					</div>

					<div class="detail-row">
						<div class="detail-label">Enquiry Message</div>
						<div class="message-box">
							<?php echo htmlspecialchars($enquiry['message'] ?? ''); ?>
						</div>
					</div>

					<div class="detail-row">
						<div class="detail-label">Status</div>
						<div>
							<?php 
								$statusClass = 'status-' . strtolower($enquiry['status']);
								$statusLabel = ucfirst($enquiry['status']);
							?>
							<span class="status-badge <?php echo $statusClass; ?>">
								<?php echo $statusLabel; ?>
							</span>
						</div>
					</div>

					<div class="detail-row">
						<div class="detail-label">Submitted On</div>
						<div class="detail-value">
							<?php echo date('M d, Y at H:i', strtotime($enquiry['created_at'])); ?>
						</div>
					</div>

					<?php if (!empty($enquiry['responded_by']) && $enquiry['status'] === 'responded'): ?>
						<div class="detail-row">
							<div class="detail-label">Responded By</div>
							<div class="detail-value">
								<?php echo htmlspecialchars($enquiry['responder_name'] ?? 'Unknown'); ?>
							</div>
						</div>

						<div class="detail-row">
							<div class="detail-label">Response Date</div>
							<div class="detail-value">
								<?php echo date('M d, Y at H:i', strtotime($enquiry['responded_at'])); ?>
							</div>
						</div>
					<?php endif; ?>

					<div class="action-buttons">
						<?php if ($enquiry['status'] === 'new'): ?>
							<form method="POST" action="/enquiry/respond/<?php echo $enquiry['id']; ?>" style="flex: 1;">
								<button type="submit" class="btn btn-primary" style="width: 100%;" onclick="return confirm('Mark this enquiry as responded?');">Mark as Responded</button>
							</form>
						<?php endif; ?>
						<form method="POST" action="/enquiry/delete/<?php echo $enquiry['id']; ?>" style="display: inline;">
							<button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this enquiry?');">Delete</button>
						</form>
					</div>
				</div>
			</div>
		</main>

		<aside>
            <p>Review enquiry details and mark as responded once you have contacted the student.</p>
		</aside>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\enquiry.php
================================================================================
<!doctype html>
<html>

<head>
	<title>Make an Enquiry - University of Northampton</title>
	<link rel="stylesheet" href="/uon.css?v=2" />
</head>

<body>
	<header>
		<img src="/logo.jpg" alt="logo" />
		<ul>
			<li><a href="/">Home</a></li>
			<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
			<li><a href="/enquiry">Make an enquiry</a></li>
		</ul>
	</header>
	<section></section>
	<main>
		<h1>Make an enquiry</h1>

		<?php if (isset($_GET['message'])): ?>
			<p style="color: green; margin-bottom: 1em;"><?php echo htmlspecialchars($_GET['message']); ?></p>
		<?php endif; ?>

		<?php if (isset($error) && !empty($error)): ?>
			<p style="color: red; margin-bottom: 1em;"><?php echo $error; ?></p>
		<?php endif; ?>

		<form method="POST" action="/enquiry/save">
			<label for="name">Your name <span style="color: red;">*</span></label>
			<input type="text" id="name" name="name" required maxlength="150"
				value="<?php echo isset($_POST['name']) ? htmlspecialchars($_POST['name']) : ''; ?>" />

			<label for="email">Email address <span style="color: red;">*</span></label>
			<input type="email" id="email" name="email" required maxlength="120"
				value="<?php echo isset($_POST['email']) ? htmlspecialchars($_POST['email']) : ''; ?>" />

			<label for="phone">Phone number</label>
			<input type="tel" id="phone" name="phone" maxlength="20"
				value="<?php echo isset($_POST['phone']) ? htmlspecialchars($_POST['phone']) : ''; ?>" />

			<label for="course_id">Which course are you enquiring about? <span style="color: red;">*</span></label>
			<select id="course_id" name="course_id" required>
				<option value="">-- Select a course --</option>
				<?php if (isset($courses) && is_array($courses)): ?>
					<?php foreach ($courses as $course): ?>
						<option value="<?php echo $course['id']; ?>" <?php echo (isset($_POST['course_id']) && $_POST['course_id'] == $course['id']) ? 'selected' : ''; ?>>
							<?php echo htmlspecialchars($course['title']); ?>
						</option>
					<?php endforeach; ?>
				<?php endif; ?>
			</select>

			<label for="message">What do you want to ask? <span style="color: red;">*</span></label>
			<textarea id="message" name="message"
				required><?php echo isset($_POST['message']) ? htmlspecialchars($_POST['message']) : ''; ?></textarea>

			<input type="submit" value="Submit Enquiry" />
		</form>
	</main>

	<aside>
		<p>We'll support you every step of the way whichever course you choose â€“ providing you with firstâ€“class
			teaching, modern facilities, impressive accommodation and great learning. We have increased focus on
			seminars or tutorials that allow closer interaction between students and a member of staff in the form of
			discussion in small groups or one-to-one that mimic practice in the professional world, allowing for
			experimentation, ideas, and teamwork.</p>

		Applications for 2026 are now open. <a href="/">Find your course now.</a>
	</aside>

	<footer>
		&copy; 2025 University of Northampton
	</footer>

</body>

</html>



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\home.php
================================================================================
<!doctype html>
<html>

<head>
    <title>University of Northampton</title>
    <link rel="stylesheet" href="/uon.css?v=2" />
</head>

<body>
    <header>
        <img src="/logo.jpg" alt="logo" />
        <ul>
            <li><a href="/">Home</a></li>
            <?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
            <li><a href="/enquiry">Make an enquiry</a></li>
        </ul>
    </header>
    <section></section>
    <main>
        <h1>University of Northampton</h1>
        <em>Supporting aspiration, creating opportunities, delivering impact</em>

        <p>We offer an extensive support throughout your studies. We have a range of support and services available to
            help ensure that your time at the University is as enjoyable and rewarding as possible. Our services offer
            support in many areas including academic, mental and physical health, disabilities, and general student
            support.
    </main>

    <aside>
        <p>We'll support you every step of the way whichever course you choose â€“ providing you with firstâ€“class
            teaching, modern facilities, impressive accommodation and great learning. We have increased focus on
            seminars or tutorials that allow closer interaction between students and a member of staff in the form of
            discussion in small groups or one-to-one that mimic practice in the professional world, allowing for
            experimentation, ideas, and teamwork.</p>

        Applications for 2026 are now open. <a href="/course-search">Find your course now.</a>
    </aside>

    <footer>
        &copy; 2025 University of Northampton
    </footer>

</body>

</html>



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\login.php
================================================================================
<!doctype html>
<html>
	<head>
		<title>Staff Login - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			main {
				display: flex;
				justify-content: center;
				align-items: flex-start;
				padding: 40px 20px;
			}
			.login-container {
				width: 100%;
				max-width: 400px;
				background: white;
				padding: 45px;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0,0,0,0.08);
				box-sizing: border-box;
				overflow: hidden;
			}
			.login-container form {
				width: 100%;
			}
			.login-container h1 {
				color: #333;
				margin: 0 0 35px 0;
				text-align: center;
				font-size: 28px;
				font-weight: 700;
			}
			.form-group {
				margin-bottom: 22px;
				width: 100%;
				display: block;
			}
			.form-group label {
				display: block;
				margin-bottom: 8px;
				font-weight: 600;
				color: #333;
				font-size: 14px;
			}
			.form-group input {
				display: block;
				width: 100%;
				max-width: 100%;
				padding: 12px 14px;
				border: 1px solid #ddd;
				border-radius: 4px;
				font-size: 14px;
				box-sizing: border-box;
				transition: border-color 0.3s;
			}
			.form-group input:focus {
				outline: none;
				border-color: #1976d2;
				box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1);
			}
			.btn-login {
				width: 100%;
				padding: 13px;
				background: #1976d2;
				color: white;
				border: none;
				border-radius: 4px;
				font-size: 16px;
				font-weight: 700;
				cursor: pointer;
				transition: background 0.3s;
				margin-top: 15px;
			}
			.btn-login:hover {
				background: #1565c0;
			}
			.btn-login:active {
				transform: translateY(1px);
			}
			.alert {
				padding: 15px;
				margin-bottom: 20px;
				border-radius: 4px;
				font-size: 14px;
			}
			.alert-danger {
				background: #f8d7da;
				color: #721c24;
				border: 1px solid #f5c6cb;
			}
			.alert-success {
				background: #d4edda;
				color: #155724;
				border: 1px solid #c3e6cb;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<div class="login-container">
				<h1>Staff Login</h1>
				
				<?php if (isset($_GET['message']) && $_GET['message'] === 'logged_out'): ?>
					<div class="alert alert-success">You have been logged out successfully</div>
				<?php endif; ?>
				
				<?php if ($error): ?>
					<div class="alert alert-danger"><?php echo htmlspecialchars($error); ?></div>
				<?php endif; ?>

				<form method="POST">
					<div class="form-group">
						<label for="username">Username</label>
						<input type="text" id="username" name="username" required autofocus />
					</div>

					<div class="form-group">
						<label for="password">Password</label>
						<input type="password" id="password" name="password" required />
					</div>

					<button type="submit" class="btn-login">Log In</button>
				</form>
			</div>
		</main>

		<aside>
            <p>Staff members can log in here to access the administration dashboard where they can manage courses, subject areas, and student enquiries.</p>
		</aside>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>





================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\modules.php
================================================================================
<!doctype html>
<html>

<head>
	<title>Modules - University of Northampton</title>
	<link rel="stylesheet" href="/uon.css?v=2" />
	<style>
		.container {
			width: 100%;
			max-width: 100%;
			box-sizing: border-box;
		}

		.header-row {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 30px;
		}

		.header-row h1 {
			margin: 0;
			color: #333;
			font-size: 28px;
			font-weight: 700;
		}

		.form-section {
			background: white;
			padding: 25px;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
			margin-bottom: 30px;
		}

		.form-section h2 {
			color: #333;
			margin: 0 0 20px 0;
			font-size: 18px;
			font-weight: 700;
		}

		.form-row {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 15px;
			margin-bottom: 20px;
		}

		.form-row.full {
			grid-template-columns: 1fr;
		}

		.form-group {
			margin-bottom: 0;
		}

		.form-group label {
			display: block;
			margin-bottom: 8px;
			font-weight: 600;
			color: #333;
			font-size: 14px;
		}

		.form-group input,
		.form-group textarea {
			width: 100%;
			padding: 10px 12px;
			border: 1px solid #ddd;
			border-radius: 4px;
			font-size: 14px;
			box-sizing: border-box;
		}

		.form-group input:focus,
		.form-group textarea:focus {
			outline: none;
			border-color: #1976d2;
		}

		.form-group textarea {
			resize: vertical;
			min-height: 100px;
		}

		.code-info {
			font-size: 12px;
			color: #999;
			margin-top: 4px;
			font-style: italic;
		}

		.form-actions {
			display: flex;
			gap: 10px;
			margin-top: 20px;
		}

		.btn {
			padding: 10px 20px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 14px;
			font-weight: 600;
			text-decoration: none;
			display: inline-block;
		}

		.btn-primary {
			background: #1976d2;
			color: white;
		}

		.btn-primary:hover {
			background: #1565c0;
		}

		.btn-secondary {
			background: #757575;
			color: white;
		}

		.btn-secondary:hover {
			background: #616161;
		}

		.btn-danger {
			background: #d32f2f;
			color: white;
		}

		.btn-danger:hover {
			background: #c62828;
		}

		.btn-small {
			padding: 6px 12px;
			font-size: 13px;
		}

		.alert {
			padding: 12px 15px;
			margin-bottom: 20px;
			border-radius: 4px;
			font-size: 14px;
		}

		.alert-danger {
			background: #f8d7da;
			color: #721c24;
			border: 1px solid #f5c6cb;
		}

		.alert-success {
			background: #d4edda;
			color: #155724;
			border: 1px solid #c3e6cb;
		}

		.modules-table {
			width: 100%;
			border-collapse: collapse;
			background: white;
			border-radius: 8px;
			overflow: hidden;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
			font-size: 14px;
		}

		.modules-table th {
			background: #f5f5f5;
			padding: 12px 15px;
			text-align: left;
			color: #333;
			font-weight: 700;
			border-bottom: 2px solid #ddd;
		}

		.modules-table td {
			padding: 12px 15px;
			border-bottom: 1px solid #eee;
			color: #666;
		}

		.modules-table tbody tr:hover {
			background: #f9f9f9;
		}

		.module-code {
			font-weight: 700;
			color: #1976d2;
			font-family: monospace;
			background: #f0f7ff;
			padding: 4px 8px;
			border-radius: 3px;
			display: inline-block;
		}

		.module-title {
			font-weight: 600;
			color: #333;
		}

		.module-description {
			font-size: 13px;
			color: #999;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
			overflow: hidden;
		}

		.module-actions {
			display: flex;
			gap: 8px;
		}

		.empty-state {
			text-align: center;
			padding: 40px 20px;
			color: #999;
			background: white;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
		}

		.empty-state p {
			margin: 0;
			font-size: 16px;
		}
	</style>
</head>

<body>
	<header>
		<img src="/logo.jpg" alt="logo" />
		<ul>
			<li><a href="/">Home</a></li>
			<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
			<li><a href="/enquiry">Make an enquiry</a></li>
		</ul>
	</header>

	<section></section>

	<main>
		<div class="container">
			<div class="header-row">
				<h1>Modules Management</h1>
				<a href="/admin" class="btn btn-secondary">Back to Admin</a>
			</div>

			<?php if (isset($_GET['message'])): ?>
				<div class="alert alert-success"><?php echo htmlspecialchars($_GET['message']); ?></div>
			<?php endif; ?>

			<?php if (isset($error) && !empty($error)): ?>
				<div class="alert alert-danger"><?php echo htmlspecialchars($error); ?></div>
			<?php endif; ?>

			<div class="form-section">
				<h2><?php echo (isset($editModule) && $editModule) ? 'Edit Module' : 'Add New Module'; ?></h2>

				<form method="POST" action="/modules/save">
					<?php if (isset($editModule) && $editModule): ?>
						<input type="hidden" name="id" value="<?php echo $editModule['id']; ?>" />
					<?php endif; ?>

					<div class="form-row">
						<div class="form-group">
							<label for="code">Module Code *</label>
							<input type="text" id="code" name="code" required maxlength="50"
								placeholder="e.g., CS101, ML201"
								value="<?php echo (isset($editModule) && $editModule) ? htmlspecialchars($editModule['code']) : ''; ?>"
								autofocus />
							<div class="code-info">Letters and numbers only (e.g., CS101, MATH201)</div>
						</div>
						<div class="form-group">
							<label for="title">Module Title *</label>
							<input type="text" id="title" name="title" required maxlength="255"
								placeholder="e.g., Introduction to Computer Science"
								value="<?php echo (isset($editModule) && $editModule) ? htmlspecialchars($editModule['title']) : ''; ?>" />
						</div>
					</div>

					<div class="form-row full">
						<div class="form-group">
							<label for="description">Module Description *</label>
							<textarea id="description" name="description" required
								placeholder="Detailed description of what students will learn in this module..."><?php echo (isset($editModule) && $editModule) ? htmlspecialchars($editModule['description']) : ''; ?></textarea>
						</div>
					</div>

					<div class="form-actions">
						<button type="submit" class="btn btn-primary">
							<?php echo (isset($editModule) && $editModule) ? 'Update Module' : 'Create Module'; ?>
						</button>
						<?php if (isset($editModule) && $editModule): ?>
							<a href="/modules" class="btn btn-secondary">Cancel</a>
						<?php endif; ?>
					</div>
				</form>
			</div>

			<h2 style="color: #333; margin: 30px 0 15px 0; font-size: 20px; font-weight: 700;">All Modules</h2>

			<?php if (is_array($modules) && count($modules) > 0): ?>
				<table class="modules-table">
					<thead>
						<tr>
							<th style="width: 12%;">Code</th>
							<th style="width: 25%;">Title</th>
							<th style="width: 50%;">Description</th>
							<th style="width: 13%;">Actions</th>
						</tr>
					</thead>
					<tbody>
						<?php foreach ($modules as $module): ?>
							<tr>
								<td><span class="module-code"><?php echo htmlspecialchars($module['code']); ?></span></td>
								<td><span class="module-title"><?php echo htmlspecialchars($module['title']); ?></span></td>
								<td><span
										class="module-description"><?php echo htmlspecialchars($module['description']); ?></span>
								</td>
								<td>
									<div class="module-actions">
										<a href="/modules?edit=<?php echo $module['id']; ?>"
											class="btn btn-small btn-primary">Edit</a>
										<a href="/modules/delete/<?php echo $module['id']; ?>" class="btn btn-small btn-danger"
											onclick="return confirm('Are you sure you want to delete this module?');">Delete</a>
									</div>
								</td>
							</tr>
						<?php endforeach; ?>
					</tbody>
				</table>
			<?php else: ?>
				<div class="empty-state">
					<p>No modules yet. Create one using the form above to get started!</p>
				</div>
			<?php endif; ?>
		</div>
	</main>

	<aside>
		<p>Manage all course modules. Create new modules and assign them to courses.</p>
	</aside>

	<footer>
		&copy; 2025 University of Northampton
	</footer>

</body>

</html>



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\subject-area-detail.php
================================================================================
<!doctype html>
<html>
	<head>
		<title><?php echo htmlspecialchars($subjectArea['name']); ?> - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			main {
				display: flex;
				justify-content: center;
				padding: 40px 20px;
			}
			.container {
				width: 100%;
				max-width: 900px;
			}
			.subject-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 30px;
			}
			.subject-header h1 {
				margin: 0;
				color: #333;
				font-size: 32px;
				font-weight: 700;
			}
			.courses-section {
				background: white;
				padding: 30px;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0,0,0,0.08);
			}
			.courses-section h2 {
				color: #333;
				margin: 0 0 25px 0;
				font-size: 20px;
				font-weight: 700;
			}
			.course-item {
				padding: 20px;
				border: 1px solid #eee;
				border-radius: 4px;
				margin-bottom: 15px;
				background: #fafafa;
				transition: all 0.3s;
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				gap: 20px;
			}
			.course-item:hover {
				background: white;
				border-color: #1976d2;
				box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			}
			.course-content {
				flex: 1;
			}
			.course-item h3 {
				margin: 0 0 8px 0;
				color: #333;
				font-size: 18px;
				font-weight: 700;
			}
			.course-meta {
				display: flex;
				gap: 12px;
				margin-bottom: 10px;
				font-size: 12px;
				color: #999;
				flex-wrap: wrap;
			}
			.course-meta span {
				background: #e8f4f8;
				padding: 3px 8px;
				border-radius: 3px;
				color: #0288d1;
			}
			.course-item p {
				margin: 0;
				color: #666;
				font-size: 14px;
				line-height: 1.6;
			}
			.course-link {
				display: inline-block;
				margin-top: 12px;
				padding: 8px 16px;
				background: #1976d2;
				color: white;
				text-decoration: none;
				border-radius: 4px;
				font-size: 13px;
				font-weight: 700;
				transition: background 0.3s;
				white-space: nowrap;
			}
			.course-link:hover {
				background: #1565c0;
			}
			.empty-state {
				text-align: center;
				padding: 40px;
				color: #999;
			}
			.empty-state p {
				font-size: 16px;
				margin: 0;
			}
			.btn {
				display: inline-block;
				padding: 12px 24px;
				background: #1976d2;
				color: white;
				text-decoration: none;
				border-radius: 4px;
				font-weight: 700;
				transition: background 0.3s;
			}
			.btn:hover {
				background: #1565c0;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<div class="container">
				<div class="subject-header">
					<h1><?php echo htmlspecialchars($subjectArea['name']); ?></h1>
					<a href="/" class="btn">Back Home</a>
				</div>

				<div class="courses-section">
					<h2>Available Courses</h2>
					
					<?php if (is_array($courses) && count($courses) > 0): ?>
						<?php foreach ($courses as $course): ?>
							<div class="course-item">
								<div class="course-content">
									<h3><?php echo htmlspecialchars($course['title']); ?></h3>
									<div class="course-meta">
										<span><?php echo htmlspecialchars($course['type']); ?></span>
										<span><?php echo $course['duration_years']; ?> year<?php echo $course['duration_years'] > 1 ? 's' : ''; ?></span>
										<?php if ($course['part_time_available']): ?>
											<span>Part-time available</span>
										<?php endif; ?>
									</div>
									<p><?php echo htmlspecialchars(substr($course['description'], 0, 150)); ?><?php echo strlen($course['description']) > 150 ? '...' : ''; ?></p>
									<a href="/course/<?php echo $course['id']; ?>" class="course-link">View Course â†’</a>
								</div>
							</div>
						<?php endforeach; ?>
					<?php else: ?>
						<div class="empty-state">
							<p>No courses available in this subject area yet.</p>
						</div>
					<?php endif; ?>

					<!-- Pagination -->
					<?php if (isset($totalPages) && $totalPages > 1): ?>
						<div style="display: flex; justify-content: center; gap: 8px; margin-top: 30px; flex-wrap: wrap;">
							<!-- Previous Button -->
							<?php if ($currentPage > 1): ?>
								<a href="?page=<?php echo $currentPage - 1; ?>" style="padding: 8px 12px; background: #1976d2; color: white; text-decoration: none; border-radius: 4px; font-weight: 600; transition: background 0.3s;" onmouseover="this.style.background='#1565c0'" onmouseout="this.style.background='#1976d2'">â† Previous</a>
							<?php endif; ?>

							<!-- Page Numbers -->
							<?php
								$startPage = max(1, $currentPage - 2);
								$endPage = min($totalPages, $currentPage + 2);

								if ($startPage > 1) {
									echo '<a href="?page=1" style="padding: 8px 12px; background: #f0f0f0; text-decoration: none; border-radius: 4px; font-weight: 600;">1</a>';
									if ($startPage > 2) {
										echo '<span style="padding: 8px 12px; color: #999;">...</span>';
									}
								}

								for ($i = $startPage; $i <= $endPage; $i++) {
									if ($i == $currentPage) {
										echo '<span style="padding: 8px 12px; background: #1976d2; color: white; border-radius: 4px; font-weight: 600;">' . $i . '</span>';
									} else {
										echo '<a href="?page=' . $i . '" style="padding: 8px 12px; background: #f0f0f0; text-decoration: none; border-radius: 4px; font-weight: 600; transition: background 0.3s;" onmouseover="this.style.background=\'#e0e0e0\'" onmouseout="this.style.background=\'#f0f0f0\'">' . $i . '</a>';
									}
								}

								if ($endPage < $totalPages) {
									if ($endPage < $totalPages - 1) {
										echo '<span style="padding: 8px 12px; color: #999;">...</span>';
									}
									echo '<a href="?page=' . $totalPages . '" style="padding: 8px 12px; background: #f0f0f0; text-decoration: none; border-radius: 4px; font-weight: 600;">' . $totalPages . '</a>';
								}
							?>

							<!-- Next Button -->
							<?php if ($currentPage < $totalPages): ?>
								<a href="?page=<?php echo $currentPage + 1; ?>" style="padding: 8px 12px; background: #1976d2; color: white; text-decoration: none; border-radius: 4px; font-weight: 600; transition: background 0.3s;" onmouseover="this.style.background='#1565c0'" onmouseout="this.style.background='#1976d2'">Next â†’</a>
							<?php endif; ?>
						</div>
					<?php endif; ?>
				</div>
			</div>
		</main>

		<aside>
            <p><?php echo htmlspecialchars($subjectArea['name']); ?> courses are designed to provide comprehensive education in this field.</p>
		</aside>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\subject-areas.php
================================================================================
<!doctype html>
<html>

<head>
	<title>Subject Areas - University of Northampton</title>
	<link rel="stylesheet" href="/uon.css?v=2" />
	<style>
		main {
			display: flex;
			justify-content: center;
			padding: 40px 20px;
		}

		.container {
			width: 100%;
			max-width: 1000px;
		}

		.subject-areas-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 40px;
		}

		.subject-areas-header h1 {
			margin: 0;
			color: #333;
			font-size: 32px;
			font-weight: 700;
		}

		.form-section {
			background: white;
			padding: 30px;
			border-radius: 8px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
			margin-bottom: 40px;
		}

		.form-section h2 {
			color: #333;
			margin: 0 0 25px 0;
			font-size: 20px;
			font-weight: 700;
		}

		.form-inline {
			display: flex;
			gap: 12px;
			align-items: flex-end;
		}

		.form-group {
			flex: 1;
			margin-bottom: 0;
		}

		.form-group label {
			display: block;
			margin-bottom: 8px;
			font-weight: 600;
			color: #333;
			font-size: 14px;
		}

		.form-group input {
			width: 100%;
			padding: 12px 14px;
			border: 1px solid #ddd;
			border-radius: 4px;
			font-size: 14px;
			box-sizing: border-box;
			transition: border-color 0.3s;
		}

		.form-group input:focus {
			outline: none;
			border-color: #1976d2;
			box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1);
		}

		.btn {
			padding: 12px 24px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 16px;
			font-weight: 700;
			transition: background 0.3s;
			text-decoration: none;
			display: inline-block;
		}

		.btn-primary {
			background: #1976d2;
			color: white;
		}

		.btn-primary:hover {
			background: #1565c0;
		}

		.btn-secondary {
			background: #757575;
			color: white;
		}

		.btn-secondary:hover {
			background: #616161;
		}

		.btn-danger {
			background: #d32f2f;
			color: white;
		}

		.btn-danger:hover {
			background: #c62828;
		}

		.btn-small {
			padding: 8px 12px;
			font-size: 14px;
		}

		.alert {
			padding: 15px;
			margin-bottom: 20px;
			border-radius: 4px;
			font-size: 14px;
		}

		.alert-danger {
			background: #f8d7da;
			color: #721c24;
			border: 1px solid #f5c6cb;
		}

		.alert-success {
			background: #d4edda;
			color: #155724;
			border: 1px solid #c3e6cb;
		}

		.subjects-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
			gap: 20px;
			margin-top: 30px;
		}

		.subject-card {
			background: white;
			border: 1px solid #eee;
			border-radius: 8px;
			padding: 20px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
			transition: all 0.3s;
			display: flex;
			flex-direction: column;
		}

		.subject-card:hover {
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
			border-color: #1976d2;
		}

		.subject-card h3 {
			margin: 0 0 15px 0;
			color: #333;
			font-size: 18px;
			font-weight: 700;
		}

		.subject-card-actions {
			display: flex;
			gap: 8px;
			margin-top: auto;
		}

		.empty-state {
			text-align: center;
			padding: 60px 20px;
			color: #999;
			background: white;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
		}

		.empty-state p {
			margin: 0;
			font-size: 16px;
		}
	</style>
</head>

<body>
	<header>
		<img src="/logo.jpg" alt="logo" />
		<ul>
			<li><a href="/">Home</a></li>
			<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
			<li><a href="/enquiry">Make an enquiry</a></li>
		</ul>
	</header>

	<section></section>

	<main>
		<div class="container">
			<div class="subject-areas-header">
				<h1>Subject Areas Management</h1>
				<a href="/admin" class="btn btn-secondary">Back to Admin</a>
			</div>

			<?php if (isset($_GET['message'])): ?>
				<div class="alert alert-success"><?php echo htmlspecialchars($_GET['message']); ?></div>
			<?php endif; ?>

			<?php if (isset($error) && !empty($error)): ?>
				<div class="alert alert-danger"><?php echo htmlspecialchars($error); ?></div>
			<?php endif; ?>

			<div class="form-section">
				<h2><?php echo (isset($editSubjectArea) && $editSubjectArea) ? 'Edit Subject Area' : 'Add New Subject Area'; ?>
				</h2>

				<form method="POST" action="/subject-areas/save">
					<?php if (isset($editSubjectArea) && $editSubjectArea): ?>
						<input type="hidden" name="id" value="<?php echo $editSubjectArea['id']; ?>" />
					<?php endif; ?>

					<div class="form-inline">
						<div class="form-group" style="flex: 2;">
							<label for="name">Subject Area Name *</label>
							<input type="text" id="name" name="name" required maxlength="150"
								value="<?php echo (isset($editSubjectArea) && $editSubjectArea) ? htmlspecialchars($editSubjectArea['name']) : ''; ?>"
								placeholder="e.g., Computing, Business, Biomedical Science" autofocus />
						</div>

						<div style="display: flex; gap: 12px; align-items: flex-end;">
							<button type="submit" class="btn btn-primary">
								<?php echo (isset($editSubjectArea) && $editSubjectArea) ? 'Update' : 'Create'; ?>
							</button>
							<?php if (isset($editSubjectArea) && $editSubjectArea): ?>
								<a href="/subject-areas" class="btn btn-secondary">Cancel</a>
							<?php endif; ?>
						</div>
					</div>
				</form>
			</div>

			<h2 style="color: #333; margin: 40px 0 20px 0; font-size: 24px; font-weight: 700;">All Subject Areas</h2>

			<?php if (is_array($subjectAreas) && count($subjectAreas) > 0): ?>
				<div class="subjects-grid">
					<?php foreach ($subjectAreas as $subject): ?>
						<div class="subject-card">
							<h3><?php echo htmlspecialchars($subject['name']); ?></h3>
							<div class="subject-card-actions">
								<a href="/subject-areas?edit=<?php echo $subject['id']; ?>"
									class="btn btn-small btn-primary">Edit</a>
								<a href="/subject-areas/delete/<?php echo $subject['id']; ?>" class="btn btn-small btn-danger"
									onclick="return confirm('Are you sure you want to delete this subject area?');">Delete</a>
							</div>
						</div>
					<?php endforeach; ?>
				</div>
			<?php else: ?>
				<div class="empty-state">
					<p>No subject areas yet. Create one using the form above to get started!</p>
				</div>
			<?php endif; ?>
		</div>
	</main>

	<aside>
		<p>Manage subject areas which are used to group courses on the website. Each course must be assigned to a
			subject area.</p>
	</aside>

	<footer>
		&copy; 2025 University of Northampton
	</footer>

</body>

</html>



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\src\Views\users.php
================================================================================
<!doctype html>
<html>
	<head>
		<title>Manage Staff - University of Northampton</title>
		<link rel="stylesheet" href="/uon.css?v=2" />
		<style>
			.admin-controls {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 20px;
			}
			.btn-primary {
				background: #1976d2;
				color: white;
				padding: 10px 20px;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				text-decoration: none;
				display: inline-block;
			}
			.btn-primary:hover {
				background: #1565c0;
			}
			.btn-logout {
				background: #d32f2f;
				color: white;
				padding: 10px 20px;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				text-decoration: none;
				display: inline-block;
			}
			.btn-logout:hover {
				background: #b71c1c;
			}
			.alert {
				padding: 15px;
				margin-bottom: 20px;
				border-radius: 4px;
				font-size: 14px;
			}
			.alert-success {
				background: #d4edda;
				color: #155724;
				border: 1px solid #c3e6cb;
			}
			.users-table {
				width: 100%;
				border-collapse: collapse;
				background: white;
				border-radius: 4px;
				overflow: hidden;
				box-shadow: 0 2px 4px rgba(0,0,0,0.1);
			}
			.users-table thead {
				background: #f5f5f5;
				border-bottom: 2px solid #ddd;
			}
			.users-table th {
				padding: 15px;
				text-align: left;
				font-weight: 600;
				color: #333;
			}
			.users-table td {
				padding: 15px;
				border-bottom: 1px solid #eee;
			}
			.users-table tr:hover {
				background: #f9f9f9;
			}
			.role-badge {
				display: inline-block;
				padding: 4px 12px;
				border-radius: 20px;
				font-size: 12px;
				font-weight: 600;
			}
			.role-superadmin {
				background: #ffebee;
				color: #c62828;
			}
			.role-staff {
				background: #e3f2fd;
				color: #1565c0;
			}
			.btn-delete {
				background: #d32f2f;
				color: white;
				padding: 6px 12px;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-size: 12px;
				text-decoration: none;
				display: inline-block;
			}
			.btn-delete:hover {
				background: #b71c1c;
			}
			.btn-delete:disabled {
				background: #ccc;
				cursor: not-allowed;
			}
			.current-user {
				background: #fffacd;
				padding: 8px;
				border-radius: 4px;
				font-size: 12px;
				color: #666;
			}
		</style>
	</head>

	<body>
		<header>
			<img src="/logo.jpg" alt="logo" />
			<ul>
                <li><a href="/">Home</a></li>
				<?php \App\Helpers\HeaderHelper::renderSubjectAreasMenu(); ?>
                <li><a href="/enquiry">Make an enquiry</a></li>
			</ul>
		</header>
		
		<section></section>
		
		<main>
			<h1>Manage Staff Accounts</h1>

			<?php if ($message): ?>
				<div class="alert alert-success"><?php echo htmlspecialchars($message); ?></div>
			<?php endif; ?>

			<div class="admin-controls">
				<a href="/users/create" class="btn-primary">+ Add New Staff Member</a>
				<a href="/logout" class="btn-logout">Logout</a>
			</div>

			<?php if (!empty($users)): ?>
				<table class="users-table">
					<thead>
						<tr>
							<th>Username</th>
							<th>Role</th>
							<th>Created</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<?php foreach ($users as $u): ?>
							<tr>
								<td>
									<?php echo htmlspecialchars($u['username']); ?>
									<?php if ($u['id'] == \App\Helpers\Auth::getUserId()): ?>
										<div class="current-user">You (current user)</div>
									<?php endif; ?>
								</td>
								<td>
									<span class="role-badge role-<?php echo $u['role']; ?>">
										<?php echo strtoupper($u['role']); ?>
									</span>
								</td>
								<td><?php echo date('M d, Y', strtotime($u['created_at'])); ?></td>
								<td>
									<?php if ($u['role'] === 'superadmin' || $u['id'] == 1): ?>
										<button class="btn-delete" disabled title="Cannot delete superadmin">Delete</button>
									<?php else: ?>
										<a href="/users/delete?id=<?php echo $u['id']; ?>" class="btn-delete">Delete</a>
									<?php endif; ?>
								</td>
							</tr>
						<?php endforeach; ?>
					</tbody>
				</table>
			<?php else: ?>
				<p>No staff members found.</p>
			<?php endif; ?>
		</main>

		<aside>
            <p>Use this page to manage staff member accounts. Only the superadmin can add or remove staff members.</p>
		</aside>

		<footer>
			&copy; 2025 University of Northampton
		</footer>

	</body>

</html>




================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\add-sample-courses.php
================================================================================
<?php
require 'autoload.php';
require 'config.php';

try {
    $courses = [
        ['Computing', 'BSc Computer Science', 'BSc', 3, 'Learn the fundamentals of computer science including algorithms, data structures, and software engineering principles.', 1, 1],
        ['Computing', 'MSc Advanced Computing', 'MSc', 2, 'Advanced computing course covering machine learning, cloud computing, and distributed systems.', 1, 1],
        ['Computing', 'BSc Software Engineering', 'BSc', 3, 'Focus on software development methodologies, project management, and real-world application development.', 0, 1],
        ['Computing', 'MA Web Development', 'MA', 2, 'Master modern web technologies including React, Node.js, and full-stack development practices.', 1, 1],
        ['Computing', 'BSc Information Technology', 'BSc', 3, 'Comprehensive IT course covering networking, databases, security, and IT infrastructure.', 1, 1],
        ['Computing', 'MSc Data Science', 'MSc', 2, 'Deep dive into data science, machine learning, and big data analytics.', 0, 1],
        ['Computing', 'BSc Cybersecurity', 'BSc', 3, 'Learn cybersecurity principles, ethical hacking, and information security management.', 1, 1],
        ['Computing', 'Diploma IT Support', 'Diploma', 2, 'Practical IT support and helpdesk fundamentals for career starters.', 1, 1],
        ['Computing', 'BSc Game Development', 'BSc', 3, 'Create games using modern game engines and learn game design principles.', 0, 1],
        ['Computing', 'MSc AI Engineering', 'MSc', 2, 'Advanced artificial intelligence and machine learning engineering.', 1, 1],
        ['Computing', 'BSc Mobile App Development', 'BSc', 3, 'Develop mobile applications for iOS and Android platforms.', 1, 1],
        ['Computing', 'Certificate Cloud Computing', 'Certificate', 1, 'Introduction to AWS, Azure, and Google Cloud platforms.', 1, 1],
        ['Computing', 'BSc Networking', 'BSc', 3, 'Computer networks, routing, switching, and network administration.', 0, 1],
        ['Computing', 'MA IT Management', 'MA', 2, 'IT strategy, project management, and enterprise IT systems.', 1, 1],
        ['Computing', 'BSc Database Systems', 'BSc', 3, 'Database design, SQL, and advanced database management systems.', 1, 1],
    ];

    $inserted = 0;

    foreach ($courses as $course) {
        list($subjectName, $title, $type, $duration, $description, $partTime, $userId) = $course;

        $stmt = \App\Models\Database::query('SELECT id FROM subject_areas WHERE name = ?', [$subjectName]);
        $subject = $stmt->fetch(PDO::FETCH_ASSOC);

        if ($subject) {
            $sql = 'INSERT INTO courses (title, subject_area_id, type, duration_years, description, part_time_available, created_by, created_at) 
                     VALUES (?, ?, ?, ?, ?, ?, ?, NOW())';
            $result = \App\Models\Database::execute($sql, [
                $title,
                $subject['id'],
                $type,
                $duration,
                $description,
                $partTime,
                $userId
            ]);
            $inserted++;
        }
    }

    echo "Successfully inserted $inserted sample courses for pagination testing!\n";
    echo "Visit http://localhost/subject-area/1 to see pagination in action.\n";
} catch (Exception $e) {
    echo "Error: " . $e->getMessage() . "\n";
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\autoload.php
================================================================================
<?php

spl_autoload_register(function ($class) {
    $prefix = 'App\\';
    $base_dir = __DIR__ . '/src/';

    $len = strlen($prefix);
    if (strncmp($prefix, $class, $len) !== 0) {
        return;
    }

    $relative_class = substr($class, $len);
    $file = $base_dir . str_replace('\\', '/', $relative_class) . '.php';

    if (file_exists($file)) {
        require $file;
    }
});



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\config.php
================================================================================
<?php

$env_file = __DIR__ . '/.env';

if (file_exists($env_file)) {
    $lines = file($env_file, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
    foreach ($lines as $line) {
        if (strpos($line, '=') !== false && strpos($line, '#') !== 0) {
            list($key, $value) = explode('=', $line, 2);
            $_ENV[trim($key)] = trim($value);
        }
    }
}

define('DB_HOST', $_ENV['DB_HOST'] ?? 'db');
define('DB_NAME', $_ENV['DB_NAME'] ?? 'university');
define('DB_USER', $_ENV['DB_USER'] ?? 'root');
define('DB_PASS', $_ENV['DB_PASS'] ?? 'root');
define('DB_PORT', $_ENV['DB_PORT'] ?? '3306');

try {
    $pdo = new PDO(
        "mysql:host=" . DB_HOST . ";port=" . DB_PORT . ";dbname=" . DB_NAME . ";charset=utf8mb4",
        DB_USER,
        DB_PASS,
        [
            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
            PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
            PDO::ATTR_EMULATE_PREPARES => false,
        ]
    );
} catch (PDOException $e) {
    die('Database connection failed: ' . $e->getMessage());
}



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\index.php
================================================================================
<?php
require_once __DIR__ . '/public/index.php';



================================================================================
FILE: C:\Users\Ahmad\OneDrive\Desktop\as1 (4)\assignment\orm-example.php
================================================================================
<?php

require_once __DIR__ . '/autoload.php';
require_once __DIR__ . '/config.php';

use App\Models\User;
use App\Models\Course;
use App\Models\SubjectArea;

echo "<h2>ORM Usage Examples</h2>";

try {
    echo "<h3>1. User Model Examples</h3>";
    
    echo "<p><strong>Create a new staff user:</strong></p>";
    $existingUser = User::getUserByUsername('john_staff');
    if (!$existingUser) {
        $result = User::createUser('john_staff', 'securepass123', 'staff');
        echo "Created user with ID: " . $result['id'] . "<br>";
    } else {
        echo "User 'john_staff' already exists<br>";
    }

    echo "<p><strong>Get all users:</strong></p>";
    $allUsers = User::getAll();
    echo "Total users: " . count($allUsers) . "<br>";
    foreach ($allUsers as $user) {
        echo "- " . $user['username'] . " (" . $user['role'] . ")<br>";
    }

    echo "<p><strong>Get user by ID:</strong></p>";
    $user = User::getById(1);
    if ($user) {
        echo "Found: " . $user['username'] . "<br>";
    }

    echo "<p><strong>Authenticate user:</strong></p>";
    $authenticated = User::authenticateUser('superadmin', 'password');
    if ($authenticated) {
        echo "Authentication successful for: " . $authenticated['username'] . "<br>";
    } else {
        echo "Authentication failed<br>";
    }

    echo "<p><strong>Get staff users:</strong></p>";
    $staffUsers = User::getUsersByRole('staff');
    echo "Total staff: " . count($staffUsers) . "<br>";

    echo "<h3>2. SubjectArea Model Examples</h3>";

    echo "<p><strong>Create subject areas:</strong></p>";
    $existingArea = SubjectArea::getSubjectAreaByName('Computer Science');
    if (!$existingArea) {
        $result = SubjectArea::createSubjectArea('Computer Science', 1);
        echo "Created subject area with ID: " . $result['id'] . "<br>";
    } else {
        echo "Subject area 'Computer Science' already exists<br>";
    }

    echo "<p><strong>Get all subject areas:</strong></p>";
    $areas = SubjectArea::getAll();
    echo "Total subject areas: " . count($areas) . "<br>";
    foreach ($areas as $area) {
        echo "- " . $area['name'] . "<br>";
    }

    echo "<hr>";
    echo "<h3>3. Course Model Examples</h3>";

    echo "<p><strong>Create courses:</strong></p>";
    if (count($areas) > 0) {
        $areaId = $areas[0]['id'];
        $result = Course::createCourse(
            'Software Engineering',
            $areaId,
            'BSc',
            3,
            'A comprehensive course on software engineering principles',
            1,
            0
        );
        echo "Created course with ID: " . $result['id'] . "<br>";
    }

    echo "<p><strong>Get all courses:</strong></p>";
    $courses = Course::getAll();
    echo "Total courses: " . count($courses) . "<br>";
    foreach ($courses as $course) {
        echo "- " . $course['title'] . " (" . $course['type'] . ", " . $course['duration_years'] . " years)<br>";
    }

    echo "<p><strong>Get courses by subject area:</strong></p>";
    if (count($areas) > 0) {
        $coursesByArea = Course::getCoursesBySubjectArea($areas[0]['id']);
        echo "Courses in " . $areas[0]['name'] . ": " . count($coursesByArea) . "<br>";
    }

    echo "<p><strong>Get full-time courses:</strong></p>";
    $fullTime = Course::getFullTimeCourses();
    echo "Full-time courses: " . count($fullTime) . "<br>";

    echo "<p><strong>Get 3-year courses:</strong></p>";
    $threeYear = Course::getCoursesByDuration(3);
    echo "3-year courses: " . count($threeYear) . "<br>";

    echo "<hr>";
    echo "<h3>4. Update and Delete Examples</h3>";

    echo "<p><strong>Update a course:</strong></p>";
    if (count($courses) > 0) {
        $courseId = $courses[0]['id'];
        $updated = Course::updateRecord($courseId, [
            'title' => 'Advanced Software Engineering'
        ]);
        echo "Updated " . $updated . " course(s)<br>";
    }

    echo "<p><strong>User count:</strong></p>";
    $userCount = User::count();
    echo "Total users in database: " . $userCount . "<br>";

} catch (Exception $e) {
    echo "<p style='color: red;'>Error: " . $e->getMessage() . "</p>";
}
?>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #f5f5f5;
    }
    h2, h3 {
        color: #333;
    }
    p {
        background: white;
        padding: 10px;
        margin: 10px 0;
        border-radius: 4px;
    }
    hr {
        margin: 30px 0;
        border: none;
        border-top: 2px solid #ddd;
    }
</style>



